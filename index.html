<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoGateDocs - Voyagez l'esprit tranquille</title>
    
    <!-- MOTEURS (React + Tailwind + Babel) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- POLICE -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;800&display=swap');
        body { font-family: 'Outfit', sans-serif; background-color: #f8fafc; margin: 0; -webkit-font-smoothing: antialiased; }
        
        /* Animations */
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Masquer scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root">
        <!-- Loader simple en CSS pur en attendant que React se charge -->
        <div style="height: 100vh; display: flex; justify-content: center; align-items: center; color: #64748b; font-family: sans-serif;">
            Chargement de GoGateDocs...
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================
        // 1. CONFIGURATION & TRADUCTIONS
        // ==========================================
        
        // Tes liens d'affiliation seront à mettre ici plus tard
        const AFFILIATE_CONFIG = {
            flight_marker: "YOUR_ID", 
            hotel_aid: "YOUR_ID",
            esim_id: "YOUR_ID", 
            activities_id: "YOUR_ID",
            insurance_id: "YOUR_ID"
        };

        const translations = {
            FR: {
                subtitle: "V1.0",
                nav_home: "Formalités", nav_budget: "Budget", nav_insurance: "Assurance", nav_help: "Aide",
                label_nationality: "Votre Nationalité (Passeport)", label_origin: "Pays de départ (Pour le vol)", label_destination: "Destination",
                label_age: "Âge du voyageur", label_start_date: "Date de départ", label_end_date: "Date de retour",
                placeholder_select: "Sélectionner...", btn_analyze: "Vérifier mon voyage",
                loading_title: "Préparation de l'embarquement", loading_text: "Analyse des formalités et coûts...",
                result_back: "Nouvelle recherche", passport_power: "Puissance Passeport", access_text: "Accès facile à", countries_text: "pays",
                docs_title: "Documents Requis", health_title: "Santé & Hygiène", customs_title: "Douanes & Interdits",
                docs_disclaimer: "Informations à titre indicatif. Vérifiez toujours les sources officielles.",
                action_title: "Réserver au meilleur prix",
                action_flight: "Vols : Voir les tarifs (-30%)", 
                action_hotel: "Hôtels : Offres exclusives (-40%)",
                offer_expires: "Offres expirent dans", services_title: "Indispensables",
                service_esim: "Internet (eSIM)", service_esim_desc: "Zéro frais de roaming.",
                service_activities: "Activités", service_activities_desc: "Coupe-file & Tours.",
                donate_title: "Soutenez GoGateDocs", donate_text: "Outil 100% gratuit. Payez-nous un café si ça vous aide !", donate_btn: "Faire un don",
                hero_title: "Voyagez sans", hero_highlight: "stress", hero_desc: "Visas, vaccins, budget, interdits... Tout savoir avant de partir.",
                doc_mandatory: "Obligatoire", cost: "Coût", footer_rights: "Tous droits réservés.",
                duration_calc: "Séjour :", origin_same_dest_error: "L'origine et la destination sont identiques.", missing_dest_error: "Choisissez une destination.",
                btn_official_link: "Site Officiel", 
                water_safe: "Eau du robinet potable ✅", water_unsafe: "Eau du robinet NON potable ❌",
                vaccine_mandatory: "Vaccin requis :", forbidden_items: "Interdit :",
                budget_title: "Calculateur Budget", budget_desc: "Estimation quotidienne par personne (hors vols).",
                style_backpacker: "Éco / Backpacker", style_standard: "Standard / Confort", style_luxury: "Luxe / Premium",
                budget_total: "Budget Total Estimé", budget_per_day: "par jour", budget_breakdown: "Détail moyen :",
                cat_accom: "Logement", cat_food: "Repas", cat_transport: "Transport/Loisirs",
                ins_title: "Assurance Voyage", ins_desc: "Pourquoi prendre une assurance ?",
                ins_card_bank: "Carte Bancaire", ins_card_bank_desc: "Plafonds souvent bas (10-30k€). Avance de frais nécessaire.",
                ins_card_spec: "Assurance Spécialisée", ins_card_spec_desc: "Plafonds élevés (100k€+), pas d'avance de frais, rapatriement inclus.",
                ins_btn_compare: "Comparer les offres",
                help_title: "Centre d'aide", help_desc: "Signalez une erreur ou contactez-nous.",
                label_name: "Nom", label_email: "Email", label_message: "Message", btn_send: "Envoyer", feedback_success: "Message envoyé !"
            },
            EN: { subtitle: "V1.0", nav_home: "Check", nav_budget: "Budget", nav_insurance: "Insurance", nav_help: "Help", label_nationality: "Nationality", label_origin: "Origin", label_destination: "Destination", label_age: "Age", label_start_date: "Start", label_end_date: "End", placeholder_select: "Select...", btn_analyze: "Check Trip", loading_title: "Boarding...", loading_text: "Checking rules...", result_back: "New Search", passport_power: "Passport Power", access_text: "Access to", countries_text: "countries", docs_title: "Documents", health_title: "Health", customs_title: "Customs", docs_disclaimer: "Check official sources.", action_title: "Book Now", action_flight: "Flights (-30%)", action_hotel: "Hotels (-40%)", offer_expires: "Expires in", services_title: "Essentials", service_esim: "eSIM Data", service_esim_desc: "No roaming fees.", service_activities: "Activities", service_activities_desc: "Skip lines.", donate_title: "Support Us", donate_text: "Free tool. Buy us a coffee!", donate_btn: "Donate", hero_title: "Travel", hero_highlight: "Smart", hero_desc: "Visas, vaccines, customs... know everything.", doc_mandatory: "Mandatory", cost: "Cost", footer_rights: "All rights reserved.", duration_calc: "Duration:", origin_same_dest_error: "Origin = Destination.", missing_dest_error: "Select destination.", btn_official_link: "Official Site", water_safe: "Tap water safe ✅", water_unsafe: "Tap water unsafe ❌", vaccine_mandatory: "Vaccine:", forbidden_items: "Forbidden:", budget_title: "Budget Calc", budget_desc: "Daily estimate per person.", style_backpacker: "Budget", style_standard: "Standard", style_luxury: "Luxury", budget_total: "Est. Budget", budget_per_day: "per day", budget_breakdown: "Breakdown:", cat_accom: "Stay", cat_food: "Food", cat_transport: "Transport", ins_title: "Insurance", ins_desc: "Comparison.", ins_card_bank: "Credit Card", ins_card_bank_desc: "Low caps, often reimbursement only.", ins_card_spec: "Specialized", ins_card_spec_desc: "High caps, direct billing.", ins_btn_compare: "Compare", help_title: "Help Center", help_desc: "Report an issue.", label_name: "Name", label_email: "Email", label_message: "Message", btn_send: "Send", feedback_success: "Sent!" }
        };

        // --- BASE DE DONNÉES PAYS (190+) ---
        const countries = [
            // EUROPE
            { code: "FR", name: "France", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 60, mid: 140, high: 300 } },
            { code: "ES", name: "Espagne", region: "EU", continent: "Europe", power: 129, water: "safe", budget: { low: 50, mid: 120, high: 250 } },
            { code: "IT", name: "Italie", region: "EU", continent: "Europe", power: 129, water: "safe", budget: { low: 60, mid: 135, high: 280 } },
            { code: "PT", name: "Portugal", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 45, mid: 110, high: 220 } },
            { code: "GB", name: "Royaume-Uni", region: "EU_NON_SCHENGEN", continent: "Europe", power: 125, water: "safe", budget: { low: 70, mid: 160, high: 350 } },
            { code: "DE", name: "Allemagne", region: "EU", continent: "Europe", power: 129, water: "safe", budget: { low: 65, mid: 140, high: 280 } },
            { code: "GR", name: "Grèce", region: "EU", continent: "Europe", power: 125, water: "safe", budget: { low: 50, mid: 130, high: 260 } },
            { code: "IE", name: "Irlande", region: "EU_NON_SCHENGEN", continent: "Europe", power: 126, water: "safe", budget: { low: 70, mid: 160, high: 320 } },
            { code: "IS", name: "Islande", region: "EU_NON_SCHENGEN", continent: "Europe", power: 120, water: "safe", budget: { low: 90, mid: 220, high: 500 } },
            { code: "CH", name: "Suisse", region: "EU", continent: "Europe", power: 126, water: "safe", budget: { low: 90, mid: 200, high: 450 } },
            { code: "BE", name: "Belgique", region: "EU", continent: "Europe", power: 127, water: "safe", budget: { low: 65, mid: 140, high: 280 } },
            { code: "NL", name: "Pays-Bas", region: "EU", continent: "Europe", power: 127, water: "safe", budget: { low: 70, mid: 150, high: 300 } },
            { code: "AT", name: "Autriche", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 60, mid: 135, high: 280 } },
            { code: "SE", name: "Suède", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 75, mid: 170, high: 350 } },
            { code: "NO", name: "Norvège", region: "EU", continent: "Europe", power: 126, water: "safe", budget: { low: 80, mid: 190, high: 400 } },
            { code: "DK", name: "Danemark", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 80, mid: 180, high: 380 } },
            { code: "FI", name: "Finlande", region: "EU", continent: "Europe", power: 128, water: "safe", budget: { low: 75, mid: 170, high: 350 } },
            { code: "PL", name: "Pologne", region: "EU", continent: "Europe", power: 124, water: "safe", budget: { low: 35, mid: 80, high: 180 } },
            { code: "CZ", name: "République Tchèque", region: "EU", continent: "Europe", power: 124, water: "safe", budget: { low: 40, mid: 90, high: 200 } },
            { code: "HU", name: "Hongrie", region: "EU", continent: "Europe", power: 122, water: "safe", budget: { low: 35, mid: 80, high: 180 } },
            { code: "HR", name: "Croatie", region: "EU", continent: "Europe", power: 123, water: "safe", budget: { low: 50, mid: 110, high: 240 } },
            { code: "MT", name: "Malte", region: "EU", continent: "Europe", power: 122, water: "safe", budget: { low: 60, mid: 130, high: 260 } },
            { code: "CY", name: "Chypre", region: "EU", continent: "Europe", power: 123, water: "safe", budget: { low: 55, mid: 120, high: 250 } },
            { code: "BG", name: "Bulgarie", region: "EU", continent: "Europe", power: 120, water: "safe", budget: { low: 30, mid: 70, high: 150 } },
            { code: "RO", name: "Roumanie", region: "EU", continent: "Europe", power: 121, water: "safe", budget: { low: 30, mid: 70, high: 160 } },
            { code: "AL", name: "Albanie", region: "EU_EAST", continent: "Europe", power: 95, water: "unsafe", budget: { low: 30, mid: 60, high: 140 } },
            { code: "RS", name: "Serbie", region: "EU_EAST", continent: "Europe", power: 105, water: "unsafe", budget: { low: 35, mid: 75, high: 180 } },
            { code: "ME", name: "Monténégro", region: "EU_EAST", continent: "Europe", power: 100, water: "unsafe", budget: { low: 35, mid: 75, high: 180 } },
            { code: "BA_BOS", name: "Bosnie-Herzégovine", region: "EU_EAST", continent: "Europe", power: 95, water: "unsafe", budget: { low: 30, mid: 70, high: 160 } },
            { code: "TR", name: "Turquie", region: "EU_EAST", continent: "Europe", power: 85, water: "unsafe", budget: { low: 35, mid: 80, high: 180 }, customs: ["Antiquités"] },
            { code: "RU", name: "Russie", region: "EU_EAST", continent: "Europe", power: 90, water: "unsafe", budget: { low: 40, mid: 90, high: 200 }, customs: ["Drones"] },
            
            // AMÉRIQUES
            { code: "US", name: "États-Unis", region: "NA", continent: "Amériques", power: 116, water: "safe", budget: { low: 90, mid: 250, high: 600 }, customs: ["Kinder Surprise", "Fruits/Viandes"] },
            { code: "CA", name: "Canada", region: "NA", continent: "Amériques", power: 115, water: "safe", budget: { low: 80, mid: 200, high: 450 }, customs: ["Cannabis"] },
            { code: "MX", name: "Mexique", region: "NA", continent: "Amériques", power: 90, water: "unsafe", budget: { low: 40, mid: 100, high: 250 }, customs: ["Cigarettes > 10 paquets"] },
            { code: "CQ", name: "Cancún (Mexique)", region: "NA", continent: "Amériques", power: 90, water: "unsafe", budget: { low: 60, mid: 150, high: 350 }, customs: ["E-cigarette"] },
            { code: "DO", name: "République Dominicaine", region: "NA", continent: "Amériques", power: 65, water: "unsafe", budget: { low: 50, mid: 130, high: 300 } },
            { code: "CU", name: "Cuba", region: "NA", continent: "Amériques", power: 55, water: "unsafe", budget: { low: 40, mid: 90, high: 200 }, customs: ["Drones", "GPS"] },
            { code: "CR", name: "Costa Rica", region: "SA", continent: "Amériques", power: 95, water: "safe", budget: { low: 50, mid: 120, high: 280 } },
            { code: "BR", name: "Brésil", region: "SA", continent: "Amériques", power: 100, water: "unsafe", budget: { low: 45, mid: 110, high: 250 }, health: { yellowFever: true } },
            { code: "AR", name: "Argentine", region: "SA", continent: "Amériques", power: 98, water: "unsafe", budget: { low: 40, mid: 90, high: 200 } },
            { code: "CO", name: "Colombie", region: "SA", continent: "Amériques", power: 80, water: "unsafe", budget: { low: 35, mid: 80, high: 180 }, health: { yellowFever: true } },
            { code: "PE", name: "Pérou", region: "SA", continent: "Amériques", power: 85, water: "unsafe", budget: { low: 35, mid: 90, high: 200 }, customs: ["Feuilles de Coca"] },
            { code: "CL", name: "Chili", region: "SA", continent: "Amériques", power: 118, water: "safe", budget: { low: 50, mid: 120, high: 280 } },
            
            // ASIE
            { code: "JP", name: "Japon", region: "AS", continent: "Asie", power: 130, water: "safe", budget: { low: 60, mid: 150, high: 350 }, customs: ["Codeine", "Couteaux"] },
            { code: "KR", name: "Corée du Sud", region: "AS", continent: "Asie", power: 129, water: "safe", budget: { low: 55, mid: 130, high: 300 } },
            { code: "SG", name: "Singapour", region: "AS", continent: "Asie", power: 130, water: "safe", budget: { low: 70, mid: 180, high: 400 }, customs: ["Chewing-gum"] },
            { code: "TH", name: "Thaïlande", region: "AS", continent: "Asie", power: 70, water: "unsafe", budget: { low: 30, mid: 70, high: 180 }, customs: ["E-cigarette (Prison!)"] },
            { code: "VN", name: "Vietnam", region: "AS", continent: "Asie", power: 65, water: "unsafe", budget: { low: 25, mid: 60, high: 150 }, customs: ["Drones"] },
            { code: "ID", name: "Indonésie", region: "AS", continent: "Asie", power: 68, water: "unsafe", budget: { low: 25, mid: 60, high: 150 }, customs: ["Drogues (Mort)"] },
            { code: "BA", name: "Bali (Indonésie)", region: "AS", continent: "Asie", power: 68, water: "unsafe", budget: { low: 35, mid: 90, high: 250 }, customs: ["Drogues (Mort)"] },
            { code: "CN", name: "Chine", region: "AS", continent: "Asie", power: 80, water: "unsafe", budget: { low: 45, mid: 100, high: 250 }, customs: ["VPN"] },
            { code: "IN", name: "Inde", region: "AS", continent: "Asie", power: 60, water: "unsafe", budget: { low: 25, mid: 50, high: 140 } },
            { code: "MY", name: "Malaisie", region: "AS", continent: "Asie", power: 110, water: "unsafe", budget: { low: 30, mid: 70, high: 180 }, customs: ["Drogues (Mort)"] },
            { code: "PH", name: "Philippines", region: "AS", continent: "Asie", power: 66, water: "unsafe", budget: { low: 35, mid: 80, high: 180 } },
            
            // AFRIQUE & MOYEN-ORIENT
            { code: "AE", name: "Dubaï (EAU)", region: "ME", continent: "Afrique / M-O", power: 110, water: "safe", budget: { low: 70, mid: 180, high: 500 }, customs: ["Codeine", "Graines pavot"] },
            { code: "MA", name: "Maroc", region: "AF", continent: "Afrique / M-O", power: 65, water: "unsafe", budget: { low: 30, mid: 70, high: 180 }, customs: ["Drones (Saisie)"] },
            { code: "EG", name: "Égypte", region: "AF", continent: "Afrique / M-O", power: 50, water: "unsafe", budget: { low: 30, mid: 70, high: 180 }, customs: ["Drones (Prison)"] },
            { code: "TN", name: "Tunisie", region: "AF", continent: "Afrique / M-O", power: 60, water: "unsafe", budget: { low: 30, mid: 65, high: 160 }, customs: ["Dinars (Export)"] },
            { code: "ZA", name: "Afrique du Sud", region: "AF", continent: "Afrique / M-O", power: 95, water: "unsafe", budget: { low: 45, mid: 100, high: 250 } },
            { code: "ZN", name: "Zanzibar (Tanzanie)", region: "AF", continent: "Afrique / M-O", power: 52, water: "unsafe", budget: { low: 50, mid: 120, high: 300 }, health: { yellowFever: true }, customs: ["Sacs plastiques"] },
            { code: "QA", name: "Qatar", region: "ME", continent: "Afrique / M-O", power: 100, water: "safe", budget: { low: 80, mid: 200, high: 500 }, customs: ["Alcool", "Porc"] },
            { code: "SA", name: "Arabie Saoudite", region: "ME", continent: "Afrique / M-O", power: 85, water: "unsafe", budget: { low: 70, mid: 160, high: 400 }, customs: ["Alcool", "Porc", "Religion"] },
            { code: "IL", name: "Israël", region: "ME", continent: "Afrique / M-O", power: 105, water: "safe", budget: { low: 70, mid: 180, high: 400 } },
            { code: "JO", name: "Jordanie", region: "ME", continent: "Afrique / M-O", power: 75, water: "unsafe", budget: { low: 45, mid: 110, high: 250 }, customs: ["Drones"] },

            // OCÉANIE
            { code: "AU", name: "Australie", region: "OC", continent: "Océanie", power: 120, water: "safe", budget: { low: 70, mid: 160, high: 350 }, customs: ["Terre", "Nourriture"] },
            { code: "NZ", name: "Nouvelle-Zélande", region: "OC", continent: "Océanie", power: 119, water: "safe", budget: { low: 70, mid: 160, high: 350 }, customs: ["Terre", "Nourriture"] },
            { code: "FJ", name: "Fidji", region: "OC", continent: "Océanie", power: 80, water: "unsafe", budget: { low: 50, mid: 120, high: 300 } },
            { code: "PF", name: "Polynésie Fr.", region: "OC", continent: "Océanie", power: 128, water: "safe", budget: { low: 90, mid: 250, high: 600 } },
            { code: "NC", name: "Nouvelle-Calédonie", region: "OC", continent: "Océanie", power: 128, water: "safe", budget: { low: 80, mid: 200, high: 450 } }
        ].sort((a, b) => a.name.localeCompare(b.name));

        // ==========================================
        // 2. COMPOSANTS (Définis avant usage)
        // ==========================================

        // Icone générique
        const Icon = ({ children, size = 24, className = "", strokeWidth = 2, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );

        // Icône Avion Réaliste (Silhouette pleine)
        const RealPlane = (props) => (
             <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="currentColor" className={props.className} {...props}>
                <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
            </svg>
        );

        // Autres icônes
        const MapPin = (props) => <Icon {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></Icon>;
        const Calendar = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></Icon>;
        const ShieldCheck = (props) => <Icon {...props}><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></Icon>;
        const Trophy = (props) => <Icon {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 1 0 5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>;
        const Heart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></Icon>;
        const Globe = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></Icon>;
        const ExternalLink = (props) => <Icon {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const AlertTriangle = (props) => <Icon {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></Icon>;
        const Info = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></Icon>;
        const Languages = (props) => <Icon {...props}><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></Icon>;
        const Clock = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></Icon>;
        const Copyright = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M14.83 14.83a4 4 0 1 1 0-5.66"/></Icon>;
        const Navigation = (props) => <Icon {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"/></Icon>;
        const Stethoscope = (props) => <Icon {...props}><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v6"/><path d="M16 15v6a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-6"/><circle cx="12" cy="9" r="1"/></Icon>;
        const Droplets = (props) => <Icon {...props}><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></Icon>;
        const Siren = (props) => <Icon {...props}><path d="M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z"/><path d="M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z"/><path d="M21 12h1"/><path d="M18.5 4.5 18 5"/><path d="M2 12h1"/><path d="M5.5 4.5 6 5"/></Icon>;
        const Wifi = (props) => <Icon {...props}><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" x2="12.01" y1="20" y2="20"/></Icon>;
        const Ticket = (props) => <Icon {...props}><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M13 5v2"/><path d="M13 17v2"/><path d="M13 11v2"/></Icon>;
        const Timer = (props) => <Icon {...props}><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></Icon>;
        const MessageSquare = (props) => <Icon {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></Icon>;
        const Wallet = (props) => <Icon {...props}><path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"/><path d="M4 6v12c0 1.1.9 2 2 2h14v-4"/><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"/></Icon>;
        const Umbrella = (props) => <Icon {...props}><path d="M22 12a10.06 10.06 1 0 0-20 0Z"/><path d="M12 12v8a2 2 0 0 0 4 0"/><path d="M12 2v1"/></Icon>;
        const HelpCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></Icon>;
        const Home = (props) => <Icon {...props}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></Icon>;
        const Utensils = (props) => <Icon {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></Icon>;
        const Bus = (props) => <Icon {...props}><path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"/><circle cx="7" cy="18" r="2"/><path d="M9 18h5"/><circle cx="16" cy="18" r="2"/></Icon>;
        const Bed = (props) => <Icon {...props}><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></Icon>;

        const Header = ({ lang, setLang, t, setCurrentView }) => (
          <header className="w-full p-6 flex justify-between items-center max-w-4xl mx-auto border-b border-slate-100 bg-white/80 backdrop-blur-sm sticky top-0 z-50">
            <div className="flex items-center gap-3 text-slate-800 font-bold text-xl cursor-pointer" onClick={() => window.location.reload()}>
               {/* LOGO AVION RÉALISTE (SVG) + TEXTE UNIQUEMENT */}
               <div className="bg-gradient-to-br from-blue-600 to-indigo-600 text-white p-2 rounded-lg shadow-md">
                   <RealPlane size={20} />
               </div>
              <span className="tracking-tight hidden sm:inline font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-600">GoGateDocs.</span>
            </div>
            <div className="flex items-center gap-3">
              <div className="relative group">
                <button className="flex items-center gap-2 text-sm font-sans font-medium text-slate-600 bg-slate-50 px-3 py-2 rounded-lg hover:bg-slate-100 transition-colors">
                  <Languages size={16} /> {lang}
                </button>
                <div className="absolute right-0 mt-2 w-32 bg-white rounded-xl shadow-xl border border-slate-100 p-1 hidden group-hover:block animate-in">
                  {Object.keys(translations).map((l) => (
                    <button key={l} onClick={() => setLang(l)} className={`w-full text-left px-3 py-2 rounded-lg text-sm font-sans ${lang === l ? 'bg-blue-50 text-blue-600 font-bold' : 'text-slate-600 hover:bg-slate-50'}`}>{l === 'FR' ? 'Français' : l === 'EN' ? 'English' : l === 'ES' ? 'Español' : l === 'ZH' ? '中文' : l === 'JA' ? '日本語' : '한국어'}</button>
                  ))}
                </div>
              </div>
              <div className="text-xs font-bold text-blue-600 bg-blue-50 px-3 py-2 rounded-full border border-blue-100 hidden sm:block">{t.subtitle}</div>
            </div>
          </header>
        );

        // Avion plus réaliste pour le logo
        const RealPlane = (props) => (
             <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="currentColor" className={props.className} {...props}>
                <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
            </svg>
        );

        const NavBar = ({ currentView, setCurrentView, t }) => (
          <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 py-2 px-6 flex justify-between items-center z-50 sm:top-0 sm:bottom-auto sm:border-b sm:border-t-0 shadow-lg sm:shadow-sm">
            <button onClick={() => setCurrentView('home')} className={`flex flex-col items-center gap-1 text-[10px] sm:text-xs font-bold transition-colors ${currentView === 'home' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}>
              <div className="p-1"><Home size={24} strokeWidth={currentView === 'home' ? 2.5 : 2} /></div>
              {t.nav_home}
            </button>
            <button onClick={() => setCurrentView('budget')} className={`flex flex-col items-center gap-1 text-[10px] sm:text-xs font-bold transition-colors ${currentView === 'budget' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}>
              <div className="p-1"><Wallet size={24} strokeWidth={currentView === 'budget' ? 2.5 : 2} /></div>
              {t.nav_budget}
            </button>
            
            {/* Bouton Central Flottant (Seulement sur Mobile) */}
            <div className="relative -top-8 sm:static sm:top-auto">
              <div className="bg-blue-600 p-3.5 rounded-full shadow-blue-300 shadow-xl border-4 border-slate-50 sm:border-0 cursor-pointer flex items-center justify-center" onClick={() => setCurrentView('home')}>
                 <Plane size={24} className="text-white" />
              </div>
            </div>

            <button onClick={() => setCurrentView('insurance')} className={`flex flex-col items-center gap-1 text-[10px] sm:text-xs font-bold transition-colors ${currentView === 'insurance' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}>
              <div className="p-1"><Umbrella size={24} strokeWidth={currentView === 'insurance' ? 2.5 : 2} /></div>
              {t.nav_insurance}
            </button>
            <button onClick={() => setCurrentView('help')} className={`flex flex-col items-center gap-1 text-[10px] sm:text-xs font-bold transition-colors ${currentView === 'help' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}>
              <div className="p-1"><HelpCircle size={24} strokeWidth={currentView === 'help' ? 2.5 : 2} /></div>
              {t.nav_help}
            </button>
          </nav>
        );

        const BudgetView = ({ t, countries }) => {
            const [dest, setDest] = useState("");
            const [days, setDays] = useState(7);
            const [style, setStyle] = useState("mid");
            const [result, setResult] = useState(null);

            const calculateBudget = () => {
                if(!dest) return;
                const country = countries.find(c => c.code === dest);
                if(!country || !country.budget) return;
                const dailyCost = country.budget[style];
                const total = dailyCost * days;
                setResult({
                    total: total,
                    daily: dailyCost,
                    accom: Math.round(dailyCost * 0.45),
                    food: Math.round(dailyCost * 0.30),
                    transport: Math.round(dailyCost * 0.25)
                });
            };

            return (
                <div className="w-full max-w-lg mx-auto animate-in pt-6 pb-32">
                    <h2 className="text-2xl font-bold text-slate-800 mb-2">{t.budget_title}</h2>
                    <p className="text-slate-500 text-sm mb-6">{t.budget_desc}</p>
                    <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4">
                        <div>
                            <label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_destination}</label>
                            <select className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" value={dest} onChange={(e) => setDest(e.target.value)}>
                                <option value="">{t.placeholder_select}</option>
                                {countries.map(c => <option key={c.code} value={c.code}>{c.name}</option>)}
                            </select>
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">Durée (Jours)</label><input type="number" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" value={days} onChange={(e) => setDays(parseInt(e.target.value) || 0)} /></div>
                            <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">Style</label><select className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50 text-sm" value={style} onChange={(e) => setStyle(e.target.value)}><option value="low">{t.style_backpacker}</option><option value="mid">{t.style_standard}</option><option value="high">{t.style_luxury}</option></select></div>
                        </div>
                        <button onClick={calculateBudget} className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 transition-colors">Calculer</button>
                    </div>
                    {result && (
                        <div className="mt-6 bg-slate-900 text-white p-6 rounded-2xl shadow-xl animate-in">
                            <div className="text-center mb-6"><p className="text-slate-400 text-xs uppercase font-bold">{t.budget_total}</p><div className="text-4xl font-extrabold text-white mt-2">{result.total} €</div><p className="text-slate-400 text-sm">~ {result.daily} € / {t.budget_per_day}</p></div>
                            <div className="space-y-3 border-t border-slate-800 pt-4">
                                <div className="flex justify-between text-sm"><div className="flex items-center gap-2 text-slate-300"><Bed size={16}/> {t.cat_accom}</div><span className="font-bold">{result.accom} €</span></div>
                                <div className="flex justify-between text-sm"><div className="flex items-center gap-2 text-slate-300"><Utensils size={16}/> {t.cat_food}</div><span className="font-bold">{result.food} €</span></div>
                                <div className="flex justify-between text-sm"><div className="flex items-center gap-2 text-slate-300"><Bus size={16}/> {t.cat_transport}</div><span className="font-bold">{result.transport} €</span></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const InsuranceView = ({ t }) => (
            <div className="w-full max-w-lg mx-auto animate-in pt-6 pb-32">
                <h2 className="text-2xl font-bold text-slate-800 mb-2">{t.ins_title}</h2>
                <p className="text-slate-500 text-sm mb-6">{t.ins_desc}</p>
                <div className="space-y-4">
                    <div className="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm"><div className="flex items-start gap-4"><div className="bg-slate-100 p-3 rounded-xl text-slate-600"><Wallet size={24} /></div><div><h3 className="font-bold text-slate-800 text-lg">{t.ins_card_bank}</h3><p className="text-sm text-slate-500 mt-2 leading-relaxed">{t.ins_card_bank_desc}</p></div></div></div>
                    <div className="bg-white p-6 rounded-2xl border-2 border-blue-100 shadow-md relative overflow-hidden"><div className="absolute top-0 right-0 bg-blue-600 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg">RECOMMANDÉ</div><div className="flex items-start gap-4"><div className="bg-blue-50 p-3 rounded-xl text-blue-600"><ShieldCheck size={24} /></div><div><h3 className="font-bold text-slate-800 text-lg">{t.ins_card_spec}</h3><p className="text-sm text-slate-500 mt-2 leading-relaxed">{t.ins_card_spec_desc}</p><button className="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold py-2 rounded-lg transition-colors">{t.ins_btn_compare}</button></div></div></div>
                </div>
            </div>
        );

        const FeedbackView = ({ t }) => (
            <div className="w-full max-w-lg mx-auto animate-in pt-6 pb-32">
                <h2 className="text-2xl font-bold text-slate-800 mb-2">{t.help_title}</h2>
                <p className="text-slate-500 text-sm mb-6">{t.help_desc}</p>
                <form className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4" onSubmit={(e) => { e.preventDefault(); alert(t.feedback_success); }}>
                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_name}</label><input type="text" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" required /></div>
                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_email}</label><input type="email" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" required /></div>
                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_message}</label><textarea className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50 h-32" required></textarea></div>
                    <button type="submit" className="w-full bg-slate-800 text-white font-bold py-3 rounded-xl hover:bg-slate-900 transition-colors flex items-center justify-center gap-2"><MessageSquare size={18} />{t.btn_send}</button>
                </form>
            </div>
        );

        // --- APP PRINCIPALE ---
        const App = () => {
            const [lang, setLang] = useState('FR');
            const [currentView, setCurrentView] = useState('home');
            const [step, setStep] = useState(0); 
            const [formData, setFormData] = useState({ nationality: "FR", origin: "FR", destination: "", age: 25, startDate: new Date().toISOString().split('T')[0], endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] });
            const [result, setResult] = useState(null);

            useEffect(() => {
                const userLang = navigator.language || navigator.userLanguage; 
                const code = userLang.split('-')[0].toUpperCase();
                if (['FR', 'EN', 'ES', 'ZH', 'JA', 'KO'].includes(code)) setLang(code); else setLang('EN');
            }, []);

            const t = translations[lang];

            const handleSearch = () => {
                if (!formData.destination) return alert(t.missing_dest_error);
                if (formData.origin === formData.destination) return alert(t.origin_same_dest_error);
                const start = new Date(formData.startDate);
                const end = new Date(formData.endDate);
                if (end <= start) return alert("La date de retour doit être après la date de départ.");

                const diffTime = Math.abs(end - start);
                const durationDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                const travelerAge = parseInt(formData.age);

                setStep(1);
                setTimeout(() => {
                    const passportInfo = countries.find(c => c.code === formData.nationality);
                    const originInfo = countries.find(c => c.code === formData.origin);
                    const destInfo = countries.find(c => c.code === formData.destination);
                    let docs = [];
                    let isEuToEu = passportInfo.region === 'EU' && destInfo.region === 'EU';

                    if (isEuToEu) { docs.push({ title: "Carte Nationale d'Identité (CNI)", status: "ok", description: "Suffisant pour les ressortissants UE.", mandatory: true, cost: "Gratuit" }); } 
                    else { docs.push({ title: "Passeport Valide", status: "ok", description: "Doit être valide au moins 6 mois après le retour.", mandatory: true, cost: "Variable" }); }

                    if (travelerAge < 18) { docs.push({ title: "Autorisation de Sortie du Territoire (AST)", status: "alert", description: "Obligatoire si le mineur voyage sans l'un de ses parents.", mandatory: true, cost: "Gratuit", link: "https://www.service-public.fr/particuliers/vosdroits/F1359" }); }

                    // Logique Visas Simplifiée (S'appuie sur la base de données)
                    if (destInfo.code === 'US') { docs.push({ title: "ESTA USA", status: "alert", description: "Autorisation obligatoire à remplir au moins 72h avant.", mandatory: true, cost: "21 USD", link: "https://esta.cbp.dhs.gov/" }); }
                    else if (destInfo.code === 'CA') { docs.push({ title: "AVE Canada", status: "alert", description: "Autorisation de voyage électronique requise.", mandatory: true, cost: "7 CAD", link: "https://www.canada.ca/fr/immigration-refugies-citoyennete/services/visiter-canada/ave.html" }); }
                    else if (destInfo.code === 'AU') { docs.push({ title: "eVisitor (subclass 651)", status: "alert", description: "Visa touriste gratuit pour Européens.", mandatory: true, cost: "Gratuit", link: "https://immi.homeaffairs.gov.au/visas/getting-a-visa/visa-listing/evisitor-651" }); }
                    else if (destInfo.code === 'BA') {
                        docs.push({ title: "Visa à l'arrivée (VOA)", status: "alert", description: "Payable en ligne ou à l'arrivée. Valable 30 jours.", mandatory: true, cost: "~35€", link: "https://molina.imigrasi.go.id/" });
                        docs.push({ title: "Taxe 'Love Bali'", status: "alert", description: "Taxe touristique obligatoire.", mandatory: true, cost: "~9€", link: "https://lovebali.baliprov.go.id/" });
                        docs.push({ title: "Déclaration Douane (ECD)", status: "info", description: "Code QR à générer 3 jours avant le départ.", mandatory: true, cost: "Gratuit", link: "https://ecd.beacukai.go.id/" });
                    } else if (destInfo.code === 'AE') {
                        docs.push({title: "Visa Touristique (Gratuit)",status: "ok",description: "Tampon gratuit de 30 jours.",mandatory: true,cost: "Gratuit"});
                        docs.push({title: "Taxe de Séjour",status: "info",description: "Taxe obligatoire à l'hôtel.",mandatory: true,cost: "~3-5€ /nuit"});
                    }

                    const flightLink = `https://www.skyscanner.fr/transport/vols/${formData.origin.toLowerCase()}/${destInfo.code === 'BA' ? 'dps' : destInfo.code.toLowerCase()}/${formData.startDate.slice(2).replace(/-/g,'')}/${formData.endDate.slice(2).replace(/-/g,'')}?associateid=${AFFILIATE_CONFIG.flight_marker}`;
                    const hotelLink = `https://www.booking.com/searchresults.html?ss=${destInfo.name}&checkin=${formData.startDate}&checkout=${formData.endDate}&aid=${AFFILIATE_CONFIG.hotel_aid}`;

                    setResult({
                        passportPower: passportInfo.power,
                        destinationName: destInfo.name,
                        originName: originInfo.name,
                        documents: docs,
                        health: destInfo.health,
                        customs: destInfo.customs,
                        water: destInfo.water,
                        duration: durationDays,
                        flightLink: flightLink,
                        hotelLink: hotelLink
                    });
                    setStep(2);
                }, 1500);
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col">
                    <Header lang={lang} setLang={setLang} t={t} setCurrentView={setCurrentView} />
                    <main className="flex-grow px-4 w-full max-w-5xl mx-auto pb-40 pt-8">
                        {currentView === 'home' && step === 0 && (
                        <div className="w-full max-w-lg mx-auto animate-in">
                            <div className="text-center mb-10 mt-8">
                                <h1 className="text-3xl sm:text-4xl font-extrabold text-slate-800 mb-3 tracking-tight">{t.hero_title} <span className="text-blue-600">{t.hero_highlight}</span>.</h1>
                                <p className="text-slate-500 text-base sm:text-lg">{t.hero_desc}</p>
                            </div>
                            <div className="bg-white p-6 sm:p-8 rounded-3xl shadow-xl border border-slate-100 relative overflow-hidden">
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div className="mb-4 md:mb-0"><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_nationality}</label><CountrySelect value={formData.nationality} onChange={(e) => setFormData({...formData, nationality: e.target.value})} placeholder={t.placeholder_select} /></div>
                                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_origin}</label><CountrySelect value={formData.origin} onChange={(e) => setFormData({...formData, origin: e.target.value})} placeholder={t.placeholder_select} /></div>
                                </div>
                                <div className="mb-4"><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_destination}</label><CountrySelect value={formData.destination} onChange={(e) => setFormData({...formData, destination: e.target.value})} placeholder={t.placeholder_select} excludeCode={formData.origin} /></div>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_start_date}</label><input type="date" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" value={formData.startDate} onChange={(e) => setFormData({...formData, startDate: e.target.value})} /></div>
                                    <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">{t.label_end_date}</label><input type="date" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" value={formData.endDate} onChange={(e) => setFormData({...formData, endDate: e.target.value})} /></div>
                                </div>
                                <InputField label={t.label_age} icon={Trophy}><input type="number" className="w-full p-3 rounded-xl border border-slate-200 bg-slate-50" value={formData.age} onChange={(e) => setFormData({...formData, age: e.target.value})} /></InputField>
                                <button onClick={handleSearch} className="w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 transition-transform active:scale-95 flex justify-center items-center gap-2">{t.btn_analyze} <ArrowRight size={20}/></button>
                            </div>
                        </div>
                        )}

                        {currentView === 'budget' && <BudgetView t={t} countries={countries} />}
                        {currentView === 'insurance' && <InsuranceView t={t} />}
                        {currentView === 'help' && <FeedbackView t={t} />}

                        {currentView === 'home' && step === 1 && (
                            <div className="flex flex-col items-center justify-center mt-20 animate-in">
                                <div className="spinner mb-4 text-blue-600"></div>
                                <h2 className="text-xl font-bold">{t.loading_title}</h2>
                                <p className="text-slate-400">{t.loading_text}</p>
                            </div>
                        )}

                        {currentView === 'home' && step === 2 && result && (
                            <div className="max-w-2xl mx-auto pb-24 animate-in">
                                <button onClick={reset} className="mb-6 text-sm font-bold text-slate-500 hover:text-blue-600">&larr; {t.result_back}</button>
                                <PassportPower score={result.passportPower} t={t} />
                                <div className="space-y-4 mb-10">
                                    {result.documents.map((d, i) => <DocumentCard key={i} {...d} t={t}/>)}
                                    <HealthCard water={result.water || 'unsafe'} vaccine={result.health?.yellowFever ? 'Fièvre Jaune' : null} t={t} />
                                    {result.customs && <CustomsCard items={result.customs} t={t} />}
                                </div>
                                <div className="mb-10"><h3 className="text-xl font-bold text-slate-800 mb-5">{t.services_title}</h3><div className="grid grid-cols-1 md:grid-cols-2 gap-4"><ServiceCard icon={Wifi} title={t.service_esim} desc={t.service_esim_desc} colorClass="bg-teal-500 text-teal-500" link={`https://www.airalo.com/?ref=${AFFILIATE_CONFIG.esim_id}`} /><ServiceCard icon={Ticket} title={t.service_activities} desc={t.service_activities_desc} colorClass="bg-purple-500 text-purple-500" link={`https://www.getyourguide.com/?partner_id=${AFFILIATE_CONFIG.activities_id}`} /></div></div>
                                <div className="mb-32"><h3 className="text-xl font-bold text-slate-800 mb-5 flex justify-between items-end">{t.action_title}</h3><OfferCountdown t={t} /><div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"><ActionButton icon={Plane} title={t.action_flight} subtitle="" colorClass="bg-sky-500 text-sky-500" link={result.flightLink} isExternal={true} /><ActionButton icon={MapPin} title={t.action_hotel} subtitle="" colorClass="bg-indigo-500 text-indigo-500" link={result.hotelLink} isExternal={true} /></div><div className="text-center p-8 rounded-3xl bg-gradient-to-br from-slate-900 to-slate-800 text-white shadow-xl relative overflow-hidden group"><div className="absolute top-0 right-0 p-8 opacity-10 transform rotate-12 group-hover:rotate-0 transition-transform duration-500"><Heart size={100} fill="currentColor" /></div><Heart className="mx-auto text-rose-500 mb-4 fill-rose-500 animate-pulse" size={32} /><h4 className="text-xl font-bold mb-2">{t.donate_title}</h4><p className="text-slate-300 mb-6 max-w-sm mx-auto text-sm leading-relaxed">{t.donate_text}</p><button className="bg-white text-slate-900 px-8 py-3 rounded-full text-sm font-bold hover:bg-rose-50 hover:text-rose-600 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">{t.donate_btn}</button></div></div>
                            </div>
                        )}
                    </main>
                    {currentView === 'home' && step === 0 && (<footer className="py-8 text-center text-slate-400 text-xs mb-16 sm:mb-0"><p>2025 GoGateDocs Inc. • {t.footer_rights}</p></footer>)}
                    
                    <NavBar currentView={currentView} setCurrentView={setCurrentView} t={t} />
                </div>
            );
        };

        // Initialisation React sécurisée
        const rootElement = document.getElementById('root');
        if (rootElement) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(<App />);
        } else {
            console.error("Erreur critique : Élément #root introuvable.");
        }
    </script>
</body>
</html>
