<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoGateDocs - Pr√©parez votre voyage</title>

    <script data-noptimize="1" data-cfasync="false" data-wpfc-render="false">
        (function () {
            var script = document.createElement("script");
            script.async = 1;
            script.src = 'https://emrld.ltd/NDc3MjA5.js?t=477209';
            document.head.appendChild(script);
        })();
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Scrollbar Custom */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================================================================
        // 1. SYST√àME D'IC√îNES SVG
        // ==========================================================================================
        
        const IconBase = ({ children, size = 24, className = "", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`lucide ${className}`} {...props}>
                {children}
            </svg>
        );

        const Icons = {
            Plane: (props) => <IconBase {...props}><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconBase>,
            Heart: (props) => <IconBase {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></IconBase>,
            MapPin: (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>,
            Calendar: (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>,
            ShieldCheck: (props) => <IconBase {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></IconBase>,
            Trophy: (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>,
            ArrowRight: (props) => <IconBase {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></IconBase>,
            Globe: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconBase>,
            ExternalLink: (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></IconBase>,
            CheckCircle: (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>,
            AlertTriangle: (props) => <IconBase {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></IconBase>,
            Info: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></IconBase>,
            Languages: (props) => <IconBase {...props}><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></IconBase>,
            Clock: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>,
            Copyright: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M15 9.354a4 4 0 1 0 0 5.292"/></IconBase>,
            Navigation: (props) => <IconBase {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"/></IconBase>,
            Droplets: (props) => <IconBase {...props}><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.8-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></IconBase>,
            Siren: (props) => <IconBase {...props}><path d="M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z"/><path d="M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z"/><path d="M21 12h1"/><path d="M18.5 4.5 18 5"/><path d="M2 12h1"/><path d="M12 2v1"/><path d="m4.929 4.929.707.707"/><path d="M12 12v6"/></IconBase>,
            Wifi: (props) => <IconBase {...props}><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" x2="12.01" y1="20" y2="20"/></IconBase>,
            Ticket: (props) => <IconBase {...props}><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M13 5v2"/><path d="M13 17v2"/><path d="M13 11v2"/></IconBase>,
            MessageSquare: (props) => <IconBase {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></IconBase>,
            Umbrella: (props) => <IconBase {...props}><path d="M22 12a10.06 10.06 0 0 0-20 0Z"/><path d="M12 12v8a2 2 0 0 0 4 0"/><path d="M12 2v1"/></IconBase>,
            Calculator: (props) => <IconBase {...props}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconBase>,
            Mail: (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>,
            CreditCard: (props) => <IconBase {...props}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></IconBase>,
            Menu: (props) => <IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconBase>,
            X: (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>,
            Users: (props) => <IconBase {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>,
            Sun: (props) => <IconBase {...props}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconBase>,
            Mountain: (props) => <IconBase {...props}><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></IconBase>,
            Briefcase: (props) => <IconBase {...props}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>,
            Cloud: (props) => <IconBase {...props}><path d="M17.5 19c0-1.7-1.3-3-3-3h-11a4 4 0 0 0 0 8h14a4.5 4.5 0 1 0 0-9 3.5 3.5 0 0 0-3.5 3.5c0 .3.06.6.15.84"/></IconBase>
        };

        const { 
            Plane, MapPin, Calendar, ShieldCheck, Trophy, ArrowRight, Heart, Globe, 
            ExternalLink, CheckCircle, AlertTriangle, Info, Languages, Clock, Copyright, 
            Navigation, Droplets, Siren, Wifi, Ticket, 
            MessageSquare, Umbrella, Calculator, Mail, CreditCard, Users, Sun, Mountain, Briefcase, Cloud
        } = Icons;

        // ==========================================================================================
        // 2. CONFIGURATION AFFILIATION
        // ==========================================================================================
        
        const AFFILIATE_CONFIG = {
            flight_marker: "YOUR_ID", 
            hotel_aid: "YOUR_ID",
            esim_link: "https://saily.tpo.li/SY9ICcCg", 
            activities_id: "YOUR_ID",
            insurance_link: "https://www.chapkadirect.com/" 
        };

        // ==========================================================================================
        // 3. TRADUCTIONS
        // ==========================================================================================
        
        const translations = {
            EN: {
                app_name: "GoGateDocs",
                subtitle: "V2.0 Global",
                menu_home: "Home",
                menu_budget: "Budget",
                menu_insurance: "Insurance",
                menu_feedback: "Help",
                hero_title: "Prepare your trip",
                hero_highlight: "simply",
                hero_desc: "Visas, local taxes, vaccines and official documents.",
                label_nationality: "Your Nationality",
                label_origin: "Departure",
                label_destination: "Destination",
                label_start_date: "Start",
                label_end_date: "End",
                label_age: "Age",
                placeholder_select: "Select a country...",
                btn_analyze: "Analyze",
                loading_title: "Analyzing Itinerary",
                loading_text: "Checking visas, taxes and formalities...",
                result_back: "Edit",
                docs_title: "Documents & Requirements",
                docs_disclaimer: "Links redirect to official government websites.",
                doc_mandatory: "Mandatory",
                cost: "Cost",
                btn_official_link: "Official Site",
                health_title: "Health & Vaccines",
                vaccine_mandatory: "Mandatory Vaccine:",
                water_safe: "Tap water safe",
                water_unsafe: "Tap water UNSAFE",
                customs_title: "Customs & Bans",
                forbidden_items: "Strictly Forbidden:",
                services_title: "Essentials",
                service_esim: "Get Instant Internet (eSIM)", 
                service_esim_desc: "No roaming fees. Easy install.",
                service_activities: "Book Unforgettable Moments", 
                service_activities_desc: "Tours, tickets & experiences.",
                action_title: "Book at Best Prices",
                action_flight: "‚úàÔ∏è Find Secret Fares (-30%)",
                action_hotel: "üè® See Exclusive Deals (-40%)",
                offer_expires: "Offer expires in",
                
                // Budget
                budget_title: "Smart Budget Estimator",
                budget_desc: "Estimated costs including Accommodation, Food, Transport & Flights.",
                budget_travelers: "Travelers",
                budget_season: "Seasonality",
                budget_season_low: "Low Season",
                budget_season_mid: "Standard",
                budget_season_high: "High Season",
                budget_style_low: "Backpacker",
                budget_style_med: "Standard",
                budget_style_high: "Luxury",
                budget_result_total: "Total Estimated Budget",
                budget_breakdown: "Breakdown",
                budget_daily: "Daily per person (on-site)",
                budget_flights: "Flight Estimate",
                budget_living: "Living Costs",
                
                // Insurance
                insurance_title: "Find Your Chapka Insurance",
                insurance_subtitle: "The best coverage for your specific trip",
                insurance_desc: "Select your destination to see the recommended Chapka plan.",
                insurance_select_dest: "Where are you going?",
                insurance_recommended: "Recommended Plan",
                insurance_public_price: "Public Price",
                insurance_your_price: "Your Price",
                btn_get_quote: "See Privileged Rate",
                
                feedback_title: "Help & Contact",
                feedback_desc: "Report a bug or request a new country.",
                feedback_placeholder: "Message (e.g., Please add Japan to the list...)",
                btn_send: "Send",
                passport_power: "Passport Power",
                access_text: "Visa-free access to",
                countries_text: "countries",
                duration_calc: "Duration:",
                days: "days",
                donate_title: "Free Project",
                donate_text: "If we helped you, buy us a coffee!",
                donate_btn: "Donate"
            },
            FR: {
                app_name: "GoGateDocs",
                subtitle: "V2.0 Mondiale",
                menu_home: "Accueil",
                menu_budget: "Budget",
                menu_insurance: "Assurance",
                menu_feedback: "Aide",
                hero_title: "Pr√©parez votre voyage",
                hero_highlight: "simplement",
                hero_desc: "Visas, taxes locales, vaccins et documents officiels.",
                label_nationality: "Votre Nationalit√©",
                label_origin: "Pays de d√©part",
                label_destination: "Destination",
                label_start_date: "Aller",
                label_end_date: "Retour",
                label_age: "√Çge",
                placeholder_select: "S√©lectionner...",
                btn_analyze: "Lancer l'analyse",
                loading_title: "Analyse de votre itin√©raire",
                loading_text: "V√©rification des visas et taxes...",
                result_back: "Modifier",
                docs_title: "Documents & Formalit√©s",
                docs_disclaimer: "Les liens redirigent vers les sites gouvernementaux officiels.",
                doc_mandatory: "Obligatoire",
                cost: "Co√ªt",
                btn_official_link: "Site Officiel",
                health_title: "Sant√© & Vaccins",
                vaccine_mandatory: "Vaccin Obligatoire :",
                water_safe: "Eau du robinet potable",
                water_unsafe: "Eau du robinet NON potable",
                customs_title: "Douanes & Interdits",
                forbidden_items: "Strictement Interdit :",
                services_title: "Indispensables",
                service_esim: "Internet Instantan√© (eSIM)", 
                service_esim_desc: "Z√©ro frais de roaming.",
                service_activities: "Moments Inoubliables", 
                service_activities_desc: "R√©servez vos activit√©s √† l'avance.",
                action_title: "R√©server au meilleur prix",
                action_flight: "‚úàÔ∏è Trouver des vols secrets (-30%)",
                action_hotel: "üè® Voir les offres exclusives (-40%)",
                offer_expires: "Offre expire dans",
                
                // Budget
                budget_title: "Calculateur de Budget",
                budget_desc: "Estimation incluant Logement, Repas, Transport et Vols.",
                budget_travelers: "Voyageurs",
                budget_season: "Saisonnalit√©",
                budget_season_low: "Basse Saison",
                budget_season_mid: "Standard",
                budget_season_high: "Haute Saison",
                budget_style_low: "Eco / Backpacker",
                budget_style_med: "Standard",
                budget_style_high: "Luxe",
                budget_result_total: "Budget Total Estim√©",
                budget_breakdown: "D√©tails",
                budget_daily: "Journalier par pers. (sur place)",
                budget_flights: "Estimation Vols",
                budget_living: "Co√ªt Vie (H√©bergement+Repas)",

                // Assurance
                insurance_title: "Trouvez votre Assurance Chapka",
                insurance_subtitle: "La couverture adapt√©e √† votre destination",
                insurance_desc: "S√©lectionnez votre destination pour voir le contrat Chapka recommand√©.",
                insurance_select_dest: "Quelle est votre destination ?",
                insurance_recommended: "Contrat Recommand√©",
                insurance_public_price: "Prix Public",
                insurance_your_price: "Tarif Privil√©gi√©",
                btn_get_quote: "Voir mon tarif",

                feedback_title: "Aide & Contact",
                feedback_desc: "Une erreur ? Vous voulez ajouter un pays ?",
                feedback_placeholder: "Votre message (ex: Ajoutez le P√©rou svp...)",
                btn_send: "Envoyer",
                passport_power: "Puissance Passeport",
                access_text: "Acc√®s sans visa √†",
                countries_text: "pays",
                duration_calc: "Dur√©e :",
                days: "jours",
                donate_title: "Projet Gratuit",
                donate_text: "Si nous vous avons aid√©, vous pouvez nous offrir un caf√© !",
                donate_btn: "Faire un don"
            },
            ES: { app_name: "GoGateDocs", subtitle: "V2.0 Global", menu_home: "Home", menu_budget: "Budget", menu_insurance: "Insurance", menu_feedback: "Help", hero_title: "Prepare your trip", hero_highlight: "simply", hero_desc: "Visas, local taxes, vaccines and official documents.", label_nationality: "Your Nationality", label_origin: "Departure", label_destination: "Destination", label_start_date: "Start", label_end_date: "End", label_age: "Age", placeholder_select: "Select...", btn_analyze: "Analyze", loading_title: "Checking Formalities", loading_text: "Searching for visas and taxes...", result_back: "Edit", docs_title: "Documents & Requirements", docs_disclaimer: "Links redirect to official government websites.", doc_mandatory: "Mandatory", cost: "Cost", btn_official_link: "Official Site", health_title: "Health", vaccine_mandatory: "Mandatory Vaccine:", water_safe: "Tap water safe", water_unsafe: "Tap water UNSAFE", customs_title: "Customs & Bans", forbidden_items: "Strictly Forbidden:", services_title: "Essentials", service_esim: "eSIM (Data)", service_esim_desc: "No roaming fees.", service_activities: "Activities", service_activities_desc: "Skip-the-line.", action_title: "Book Now", action_flight: "‚úàÔ∏è Secret Flight Deals (-30%)", action_hotel: "üè® Exclusive Hotel Rates (-40%)", offer_expires: "Offer expires in", budget_title: "Budget Calculator", budget_desc: "Estimate excluding flights", budget_style_low: "Budget / Backpacker", budget_style_med: "Standard", budget_style_high: "Luxury", budget_result: "Estimated budget:", budget_daily: "per day", insurance_title: "Travel Insurance", insurance_subtitle: "Health Coverage", insurance_desc: "Medical costs can be huge.", btn_get_quote: "Get Quote", feedback_title: "Contact", feedback_desc: "Bug report or feedback?", btn_send: "Send", passport_power: "Passport Power", access_text: "Visa-free access to", countries_text: "countries", duration_calc: "Duration:", days: "days", donate_title: "Free Project", donate_text: "If we helped you, buy us a coffee!", donate_btn: "Donate" },
            CN: { app_name: "GoGateDocs", subtitle: "V2.0 Global", menu_home: "Home", menu_budget: "Budget", menu_insurance: "Insurance", menu_feedback: "Help", hero_title: "Prepare your trip", hero_highlight: "simply", hero_desc: "Visas, local taxes, vaccines and official documents.", label_nationality: "Your Nationality", label_origin: "Departure", label_destination: "Destination", label_start_date: "Start", label_end_date: "End", label_age: "Age", placeholder_select: "Select...", btn_analyze: "Analyze", loading_title: "Checking Formalities", loading_text: "Searching for visas and taxes...", result_back: "Edit", docs_title: "Documents & Requirements", docs_disclaimer: "Links redirect to official government websites.", doc_mandatory: "Mandatory", cost: "Cost", btn_official_link: "Official Site", health_title: "Health", vaccine_mandatory: "Mandatory Vaccine:", water_safe: "Tap water safe", water_unsafe: "Tap water UNSAFE", customs_title: "Customs & Bans", forbidden_items: "Strictly Forbidden:", services_title: "Essentials", service_esim: "eSIM (Data)", service_esim_desc: "No roaming fees.", service_activities: "Activities", service_activities_desc: "Skip-the-line.", action_title: "Book Now", action_flight: "‚úàÔ∏è Secret Flight Deals (-30%)", action_hotel: "üè® Exclusive Hotel Rates (-40%)", offer_expires: "Offer expires in", budget_title: "Budget Calculator", budget_desc: "Estimate excluding flights", budget_style_low: "Budget / Backpacker", budget_style_med: "Standard", budget_style_high: "Luxury", budget_result: "Estimated budget:", budget_daily: "per day", insurance_title: "Travel Insurance", insurance_subtitle: "Health Coverage", insurance_desc: "Medical costs can be huge.", btn_get_quote: "Get Quote", feedback_title: "Contact", feedback_desc: "Bug report or feedback?", btn_send: "Send", passport_power: "Passport Power", access_text: "Visa-free access to", countries_text: "countries", duration_calc: "Duration:", days: "days", donate_title: "Free Project", donate_text: "If we helped you, buy us a coffee!", donate_btn: "Donate" },
            JP: { app_name: "GoGateDocs", subtitle: "V2.0 Global", menu_home: "Home", menu_budget: "Budget", menu_insurance: "Insurance", menu_feedback: "Help", hero_title: "Prepare your trip", hero_highlight: "simply", hero_desc: "Visas, local taxes, vaccines and official documents.", label_nationality: "Your Nationality", label_origin: "Departure", label_destination: "Destination", label_start_date: "Start", label_end_date: "End", label_age: "Age", placeholder_select: "Select...", btn_analyze: "Analyze", loading_title: "Checking Formalities", loading_text: "Searching for visas and taxes...", result_back: "Edit", docs_title: "Documents & Requirements", docs_disclaimer: "Links redirect to official government websites.", doc_mandatory: "Mandatory", cost: "Cost", btn_official_link: "Official Site", health_title: "Health", vaccine_mandatory: "Mandatory Vaccine:", water_safe: "Tap water safe", water_unsafe: "Tap water UNSAFE", customs_title: "Customs & Bans", forbidden_items: "Strictly Forbidden:", services_title: "Essentials", service_esim: "eSIM (Data)", service_esim_desc: "No roaming fees.", service_activities: "Activities", service_activities_desc: "Skip-the-line.", action_title: "Book Now", action_flight: "‚úàÔ∏è Secret Flight Deals (-30%)", action_hotel: "üè® Exclusive Hotel Rates (-40%)", offer_expires: "Offer expires in", budget_title: "Budget Calculator", budget_desc: "Estimate excluding flights", budget_style_low: "Budget / Backpacker", budget_style_med: "Standard", budget_style_high: "Luxury", budget_result: "Estimated budget:", budget_daily: "per day", insurance_title: "Travel Insurance", insurance_subtitle: "Health Coverage", insurance_desc: "Medical costs can be huge.", btn_get_quote: "Get Quote", feedback_title: "Contact", feedback_desc: "Bug report or feedback?", btn_send: "Send", passport_power: "Passport Power", access_text: "Visa-free access to", countries_text: "countries", duration_calc: "Duration:", days: "days", donate_title: "Free Project", donate_text: "If we helped you, buy us a coffee!", donate_btn: "Donate" }
        };

        // ==========================================================================================
        // 4. BASE DE DONN√âES PAYS ETENDUE (FORMAT LISIBLE ET √âDITABLE)
        // ==========================================================================================
        
        const countriesData = [
            // --- ASIE ---
            { 
                code: "ID", name: "Indon√©sie (G√©n√©ral)", region: "AS", continent: "Asie", power: 70, water: "unsafe", costFactor: 0.7,
                customs: ["Drogues (Peine de mort)", "Plus de 1L d'alcool"],
                requirements: [
                    { type: "visa", title: "e-VOA (Visa on Arrival)", description: "Visa tourisme 30 jours. Payable en ligne ou √† l'arriv√©e.", cost: "~32‚Ç¨ (500k IDR)", link: "https://molina.imigrasi.go.id/", mandatory: true },
                    { type: "form", title: "Douane (ECD)", description: "QR Code douanier obligatoire (√† faire 3 jours avant).", cost: "Gratuit", link: "https://ecd.beacukai.go.id/", mandatory: true },
                    { type: "form", title: "SATUSEHAT Health Pass", description: "Formulaire sant√© Mpox (Nouveau 2024).", cost: "Gratuit", link: "https://sshp.kemkes.go.id/", mandatory: true }
                ]
            },
            { 
                code: "BA", name: "Bali (Indon√©sie)", region: "AS", continent: "Asie", power: 70, water: "unsafe", costFactor: 1.0,
                customs: ["Drogues (Tol√©rance Z√©ro)", "M√©dicaments (Ordonnance obligatoire)"],
                requirements: [
                    { type: "visa", title: "e-VOA (Visa on Arrival)", description: "Visa 30 jours (Renouvelable 1 fois).", cost: "~32‚Ç¨ (500k IDR)", link: "https://molina.imigrasi.go.id/", mandatory: true },
                    { type: "tax", title: "Taxe Touristique 'Love Bali'", description: "Taxe r√©gionale obligatoire pour entrer √† Bali.", cost: "~9‚Ç¨ (150k IDR)", link: "https://lovebali.baliprov.go.id/", mandatory: true },
                    { type: "form", title: "Douane (ECD)", description: "Code QR obligatoire √† l'arriv√©e.", cost: "Gratuit", link: "https://ecd.beacukai.go.id/", mandatory: true },
                    { type: "form", title: "SATUSEHAT Health Pass", description: "Nouveau formulaire sant√© obligatoire.", cost: "Gratuit", link: "https://sshp.kemkes.go.id/", mandatory: true }
                ]
            },
            { 
                code: "JP", name: "Japon", region: "AS", continent: "Asie", power: 130, water: "safe", costFactor: 1.6,
                customs: ["Viande/Fruits frais interdits", "Certains m√©dicaments (Codeine)", "Couteaux de poche"],
                requirements: [
                    { type: "form", title: "Visit Japan Web", description: "QR Code pour l'immigration et les douanes (Recommand√©).", cost: "Gratuit", link: "https://vjw-lp.digital.go.jp/en/", mandatory: false }
                ]
            },
            {
                code: "TH", name: "Tha√Ølande", region: "AS", continent: "Asie", power: 75, water: "unsafe", costFactor: 0.8,
                customs: ["Cigarettes √©lectroniques (Interdit/Prison)", "Plus de 200 cigarettes"],
                requirements: [
                    { type: "visa", title: "Exemption de Visa (60 jours)", description: "Pour FR, BE, CH, CA. Tampon gratuit √† l'arriv√©e.", cost: "Gratuit", mandatory: false }
                ]
            },
            {
                code: "VN", name: "Vietnam", region: "AS", continent: "Asie", power: 65, water: "unsafe", costFactor: 0.6,
                customs: ["Drones (D√©claration complexe)", "Litt√©rature politique"],
                requirements: [
                    { type: "visa", title: "E-Visa (90 jours)", description: "Obligatoire pour s√©jours > 45 jours (ou si hors exemption).", cost: "~25 USD", link: "https://evisa.xuatnhapcanh.gov.vn/", mandatory: true },
                    { type: "info", title: "Exemption 45 jours", description: "Pour citoyens FR, DE, IT, ES, UK (entr√©e simple).", cost: "Gratuit", mandatory: false }
                ]
            },
            {
                code: "CN", name: "Chine", region: "AS", continent: "Asie", power: 80, water: "unsafe", costFactor: 1.1,
                customs: ["VPN (Interdits)", "Nourriture"],
                requirements: [
                    { type: "info", title: "Exemption 15 jours (Essai)", description: "Pour FR, DE, IT, ES, NL (Jusqu'√† fin 2025).", cost: "Gratuit", mandatory: false },
                    { type: "visa", title: "Visa Tourisme (L)", description: "Si s√©jour > 15 jours. Empreintes obligatoires.", cost: "~126‚Ç¨", link: "https://www.visaforchina.cn/", mandatory: true }
                ]
            },
            {
                code: "LK", name: "Sri Lanka", region: "AS", continent: "Asie", power: 50, water: "unsafe", costFactor: 0.6,
                requirements: [
                    { type: "visa", title: "ETA / E-Visa", description: "Autorisation √©lectronique obligatoire avant d√©part.", cost: "~50 USD", link: "https://www.srilankaevisa.lk/", mandatory: true },
                    { type: "form", title: "Arrival Card", description: "A remplir en ligne 3j avant.", cost: "Gratuit", link: "https://eservices.immigration.gov.lk/", mandatory: false }
                ]
            },
            {
                code: "IN", name: "Inde", region: "AS", continent: "Asie", power: 60, water: "unsafe", costFactor: 0.5,
                requirements: [
                    { type: "visa", title: "E-Visa", description: "Obligatoire (Tourist, Business, Medical).", cost: "~25-80 USD", link: "https://indianvisaonline.gov.in/evisa/tvoa.html", mandatory: true }
                ]
            },
            { 
                code: "KH", name: "Cambodge", region: "AS", continent: "Asie", power: 50, water: "unsafe", costFactor: 0.6, 
                requirements: [{ type: "visa", title: "E-Visa", description: "Tourisme 30 jours.", cost: "36 USD", link: "https://www.evisa.gov.kh/", mandatory: true }] 
            },
            { 
                code: "LA", name: "Laos", region: "AS", continent: "Asie", power: 45, water: "unsafe", costFactor: 0.5, 
                requirements: [{ type: "visa", title: "E-Visa", description: "Tourisme 30 jours.", cost: "50 USD", link: "https://laoevisa.gov.la/", mandatory: true }] 
            },
            { 
                code: "PH", name: "Philippines", region: "AS", continent: "Asie", power: 66, water: "unsafe", costFactor: 0.7, 
                requirements: [{ type: "form", title: "eTravel", description: "QR Code obligatoire 72h avant.", cost: "Gratuit", link: "https://etravel.gov.ph/", mandatory: true }] 
            },
            { 
                code: "MY", name: "Malaisie", region: "AS", continent: "Asie", power: 110, water: "unsafe", costFactor: 0.8, 
                requirements: [{ type: "form", title: "MDAC", description: "Digital Arrival Card obligatoire 3j avant.", cost: "Gratuit", link: "https://imigresen-online.imi.gov.my/mdac/main", mandatory: true }] 
            },
            { 
                code: "SG", name: "Singapour", region: "AS", continent: "Asie", power: 130, water: "safe", costFactor: 2.2, 
                customs: ["Chewing-gum (Interdit)", "Cigarette √©lectronique"], 
                requirements: [{ type: "form", title: "SG Arrival Card", description: "Obligatoire 3j avant.", cost: "Gratuit", link: "https://eservices.ica.gov.sg/sgarrivalcard/", mandatory: true }] 
            },
            { 
                code: "KR", name: "Cor√©e du Sud", region: "AS", continent: "Asie", power: 129, water: "safe", costFactor: 1.4, 
                requirements: [{ type: "visa", title: "K-ETA", description: "Temporairement suspendu pour 22 pays (dont FR) jusqu'√† fin 2024.", cost: "Gratuit", mandatory: false }] 
            },

            // --- AM√âRIQUES ---
            {
                code: "US", name: "√âtats-Unis", region: "NA", continent: "Am√©riques", power: 116, water: "safe", costFactor: 2.2,
                customs: ["Kinder Surprise", "Fruits/Viandes", "Fromages non pasteuris√©s"],
                requirements: [
                    { type: "visa", title: "ESTA", description: "Autorisation voyage √©lectronique. Min 72h avant.", cost: "21 USD", link: "https://esta.cbp.dhs.gov/", mandatory: true }
                ]
            },
            {
                code: "CA", name: "Canada", region: "NA", continent: "Am√©riques", power: 115, water: "safe", costFactor: 2.0,
                customs: ["Cannabis (D√©claration obligatoire fronti√®res)"],
                requirements: [
                    { type: "visa", title: "AVE (eTA)", description: "Autorisation de voyage √©lectronique.", cost: "7 CAD", link: "https://www.canada.ca/fr/immigration-refugies-citoyennete/services/visiter-canada/ave.html", mandatory: true }
                ]
            },
            {
                code: "CQ", name: "Canc√∫n / Quintana Roo (Mexique)", region: "NA", continent: "Am√©riques", power: 90, water: "unsafe", costFactor: 1.4,
                customs: ["Cigarettes √©lectroniques (R√©glement√©)"],
                requirements: [
                    { type: "tax", title: "Visitax", description: "Taxe touristique locale obligatoire Quintana Roo.", cost: "~11 USD", link: "https://www.visitax.gob.mx/", mandatory: true },
                    { type: "form", title: "Formulaire Migratoire (FMM)", description: "Souvent d√©mat√©rialis√© ou dans l'avion.", cost: "Gratuit", mandatory: true }
                ]
            },
            {
                code: "MX", name: "Mexique", region: "NA", continent: "Am√©riques", power: 90, water: "unsafe", costFactor: 1.0,
                requirements: [{ type: "form", title: "FMM (Formulaire)", description: "Formulaire d'immigration.", cost: "Gratuit", mandatory: true }]
            },
            {
                code: "BR", name: "Br√©sil", region: "SA", continent: "Am√©riques", power: 100, water: "unsafe", costFactor: 1.1, 
                health: { yellowFever: true }, customs: ["Esp√®ces prot√©g√©es"]
            },
            { 
                code: "CO", name: "Colombie", region: "SA", continent: "Am√©riques", power: 80, water: "unsafe", costFactor: 0.8, 
                health: { yellowFever: true },
                requirements: [{ type: "form", title: "Check-Mig", description: "Formulaire migratoire obligatoire (24h avant).", cost: "Gratuit", link: "https://apps.migracioncolombia.gov.co/pre-registro/public/preregistro.jsf", mandatory: true }]
            },
            { 
                code: "PE", name: "P√©rou", region: "SA", continent: "Am√©riques", power: 85, water: "unsafe", costFactor: 0.9, 
                customs: ["Feuilles de Coca (Quantit√© limit√©e)"] 
            },
            { 
                code: "CL", name: "Chili", region: "SA", continent: "Am√©riques", power: 118, water: "safe", costFactor: 1.3, 
                requirements: [{ type: "form", title: "SAG Affidavit", description: "D√©claration douani√®re stricte.", cost: "Gratuit", mandatory: true }] 
            },
            { code: "AR", name: "Argentine", region: "SA", continent: "Am√©riques", power: 98, water: "unsafe", costFactor: 0.8 },
            { code: "CR", name: "Costa Rica", region: "SA", continent: "Am√©riques", power: 95, water: "safe", costFactor: 1.4 },
            { 
                code: "DO", name: "R√©publique Dominicaine", region: "NA", continent: "Am√©riques", power: 65, water: "unsafe", costFactor: 1.1,
                requirements: [{ type: "form", title: "E-Ticket", description: "Formulaire entr√©e/sortie obligatoire.", cost: "Gratuit", link: "https://eticket.migracion.gob.do/", mandatory: true }]
            },
            { 
                code: "CU", name: "Cuba", region: "NA", continent: "Am√©riques", power: 55, water: "unsafe", costFactor: 0.9, customs: ["Drones", "GPS Satellite"],
                requirements: [
                    { type: "form", title: "D'Viajeros", description: "Formulaire num√©rique obligatoire.", cost: "Gratuit", link: "https://dviajeros.mitrans.gob.cu/", mandatory: true },
                    { type: "visa", title: "Carte de Touriste", description: "Visa papier obligatoire (via agence ou consulat).", cost: "~25‚Ç¨", mandatory: true }
                ]
            },
            { code: "JM", name: "Jama√Øque", region: "NA", continent: "Am√©riques", power: 75, water: "unsafe", costFactor: 1.5 },
            { code: "BS", name: "Bahamas", region: "NA", continent: "Am√©riques", power: 85, water: "unsafe", costFactor: 2.5 },
            { code: "BB", name: "Barbade", region: "NA", continent: "Am√©riques", power: 90, water: "safe", costFactor: 2.2 },

            // --- OC√âANIE ---
            {
                code: "AU", name: "Australie", region: "OC", continent: "Oc√©anie", power: 120, water: "safe", costFactor: 2.1,
                customs: ["Nourriture (Bio-s√©curit√© extr√™me)", "Terres/Sables"],
                requirements: [
                    { type: "visa", title: "eVisitor (651)", description: "Visa gratuit pour Europ√©ens. Demande en ligne.", cost: "Gratuit", link: "https://immi.homeaffairs.gov.au/visas/getting-a-visa/visa-listing/evisitor-651", mandatory: true },
                    { type: "form", title: "Digital Passenger Declaration", description: "72h avant le vol.", cost: "Gratuit", mandatory: true }
                ]
            },
            {
                code: "NZ", name: "Nouvelle-Z√©lande", region: "OC", continent: "Oc√©anie", power: 119, water: "safe", costFactor: 2.0,
                customs: ["Mat√©riel de rando sale", "Nourriture"],
                requirements: [
                    { type: "visa", title: "NZeTA", description: "Autorisation √©lectronique de voyage.", cost: "17-23 NZD", link: "https://nzeta.immigration.govt.nz/", mandatory: true },
                    { type: "tax", title: "IVL Tax", description: "Taxe conservation et tourisme.", cost: "35 NZD", mandatory: true }
                ]
            },
            { code: "FJ", name: "Fidji", region: "OC", continent: "Oc√©anie", power: 80, water: "unsafe", costFactor: 1.4 },
            { code: "PF", name: "Polyn√©sie Fran√ßaise", region: "OC", continent: "Oc√©anie", power: 128, water: "safe", costFactor: 2.5 },
            { code: "NC", name: "Nouvelle-Cal√©donie", region: "OC", continent: "Oc√©anie", power: 128, water: "safe", costFactor: 2.2 },

            // --- AFRIQUE & MOYEN-ORIENT ---
            {
                code: "AE", name: "Duba√Ø (√âmirats)", region: "ME", continent: "Afrique / M-O", power: 110, water: "safe", costFactor: 2.0,
                customs: ["M√©dicaments (Cod√©ine)", "Graines de pavot"],
                requirements: [
                    { type: "info", title: "Visa Touristique", description: "Tampon gratuit de 30 jours √† l'arriv√©e (FR/EU).", cost: "Gratuit", mandatory: false },
                    { type: "tax", title: "Tourism Dirham", description: "Taxe de s√©jour payable √† l'h√¥tel.", cost: "7-20 AED/nuit", mandatory: true }
                ]
            },
            {
                code: "EG", name: "√âgypte", region: "AF", continent: "Afrique / M-O", power: 50, water: "unsafe", costFactor: 0.6,
                customs: ["Drones (Interdit - Prison)"],
                requirements: [
                    { type: "visa", title: "E-Visa / Visa On Arrival", description: "25$ √† la banque avant la douane ou en ligne.", cost: "25 USD", link: "https://visa2egypt.gov.eg/", mandatory: true }
                ]
            },
            {
                code: "KE", name: "Kenya", region: "AF", continent: "Afrique / M-O", power: 55, water: "unsafe", costFactor: 1.1,
                health: { yellowFever: true }, customs: ["Sacs plastiques", "Drones"],
                requirements: [
                    { type: "visa", title: "eTA Kenya", description: "Remplace le visa. Obligatoire pour TOUS.", cost: "~30 USD", link: "https://www.etakenya.go.ke/", mandatory: true }
                ]
            },
            {
                code: "ZN", name: "Zanzibar (Tanzanie)", region: "AF", continent: "Afrique / M-O", power: 52, water: "unsafe", costFactor: 1.2,
                health: { yellowFever: true }, customs: ["Sacs plastiques (Interdit)", "Coquillages"],
                requirements: [
                    { type: "visa", title: "E-Visa Tanzanie", description: "E-Visa ou visa √† l'arriv√©e requis.", cost: "50 USD", link: "https://eservices.immigration.go.tz/visa/", mandatory: true },
                    { type: "tax", title: "Assurance Inbound", description: "Nouvelle assurance obligatoire (Oct 2024).", cost: "44 USD", link: "https://visitzanzibar.go.tz/", mandatory: true }
                ]
            },
            { code: "MA", name: "Maroc", region: "AF", continent: "Afrique / M-O", power: 65, water: "unsafe", costFactor: 0.7, customs: ["Drones (Confiscation)"] },
            { code: "SA", name: "Arabie Saoudite", region: "ME", continent: "Afrique / M-O", power: 85, water: "unsafe", costFactor: 1.8, customs: ["Alcool (Tol√©rance Z√©ro)", "Symboles religieux"], requirements: [{ type: "visa", title: "E-Visa", description: "Obligatoire pour tourisme.", cost: "~120‚Ç¨", link: "https://visa.visitsaudi.com/", mandatory: true }] },
            { code: "JO", name: "Jordanie", region: "ME", continent: "Afrique / M-O", power: 75, water: "unsafe", costFactor: 1.3, customs: ["Drones (Interdit)"], requirements: [{ type: "visa", title: "Jordan Pass", description: "Inclut Visa + Petra. Tr√®s avantageux.", cost: "70-80 JOD", link: "https://www.jordanpass.jo/", mandatory: false }] },
            { code: "ZA", name: "Afrique du Sud", region: "AF", continent: "Afrique / M-O", power: 95, water: "unsafe", costFactor: 1.0 },
            { code: "MU", name: "√éle Maurice", region: "AF", continent: "Afrique / M-O", power: 90, water: "unsafe", costFactor: 1.4, requirements: [{ type: "form", title: "All-in-One Form", description: "Formulaire sant√©/immigration obligatoire.", cost: "Gratuit", link: "https://safemauritius.govmu.org/", mandatory: true }] },
            { code: "SC", name: "Seychelles", region: "AF", continent: "Afrique / M-O", power: 85, water: "safe", costFactor: 2.5, requirements: [{ type: "form", title: "Travel Authorization", description: "Obligatoire avant d√©part.", cost: "10‚Ç¨", link: "https://seychelles.govtas.com/", mandatory: true }] },
            { code: "MD", name: "Madagascar", region: "AF", continent: "Afrique / M-O", power: 50, water: "unsafe", costFactor: 0.6, requirements: [{ type: "visa", title: "Visa Arriv√©e", description: "35‚Ç¨ pour 30 jours.", cost: "35‚Ç¨", mandatory: true }] },
            
            // --- EUROPE ---
            { code: "FR", name: "France", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 1.8 },
            { code: "DE", name: "Allemagne", region: "EU", continent: "Europe", power: 129, water: "safe", costFactor: 1.7 },
            { code: "IT", name: "Italie", region: "EU", continent: "Europe", power: 129, water: "safe", costFactor: 1.6 },
            { code: "ES", name: "Espagne", region: "EU", continent: "Europe", power: 129, water: "safe", costFactor: 1.5 },
            { code: "GB", name: "Royaume-Uni", region: "EU_NON_SCHENGEN", continent: "Europe", power: 125, water: "safe", costFactor: 2.0, requirements: [{ type: "visa", title: "ETA (Fin 2025)", description: "Bient√¥t obligatoire pour les europ√©ens.", cost: "10 GBP", mandatory: false }] },
            { code: "TR", name: "Turquie", region: "EU_EAST", continent: "Europe", power: 85, water: "unsafe", costFactor: 0.8, customs: ["Antiquit√©s (Interdiction stricte de sortie)"] },
            { code: "RU", name: "Russie", region: "EU_EAST", continent: "Europe", power: 90, water: "unsafe", costFactor: 1.1, customs: ["M√©dicaments cod√©in√©s"], requirements: [{ type: "visa", title: "E-Visa", description: "Disponible pour 55 pays (dont UE).", cost: "~50‚Ç¨", link: "https://electronic-visa.kdmid.ru/", mandatory: true }] },
            { code: "PT", name: "Portugal", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 1.4 },
            { code: "NL", name: "Pays-Bas", region: "EU", continent: "Europe", power: 127, water: "safe", costFactor: 1.9 },
            { code: "BE", name: "Belgique", region: "EU", continent: "Europe", power: 127, water: "safe", costFactor: 1.8 },
            { code: "CH", name: "Suisse", region: "EU", continent: "Europe", power: 126, water: "safe", costFactor: 2.5 },
            { code: "AT", name: "Autriche", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 1.7 },
            { code: "SE", name: "Su√®de", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 1.9 },
            { code: "NO", name: "Norv√®ge", region: "EU", continent: "Europe", power: 126, water: "safe", costFactor: 2.3 },
            { code: "DK", name: "Danemark", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 2.1 },
            { code: "FI", name: "Finlande", region: "EU", continent: "Europe", power: 128, water: "safe", costFactor: 2.0 },
            { code: "GR", name: "Gr√®ce", region: "EU", continent: "Europe", power: 125, water: "safe", costFactor: 1.4 },
            { code: "IE", name: "Irlande", region: "EU_NON_SCHENGEN", continent: "Europe", power: 126, water: "safe", costFactor: 1.9 },
            { code: "PL", name: "Pologne", region: "EU", continent: "Europe", power: 124, water: "safe", costFactor: 0.9 },
            { code: "CZ", name: "R√©publique Tch√®que", region: "EU", continent: "Europe", power: 124, water: "safe", costFactor: 1.0 },
            { code: "HU", name: "Hongrie", region: "EU", continent: "Europe", power: 122, water: "safe", costFactor: 0.9 },
            { code: "IS", name: "Islande", region: "EU_NON_SCHENGEN", continent: "Europe", power: 120, water: "safe", costFactor: 2.4 },
            { code: "HR", name: "Croatie", region: "EU", continent: "Europe", power: 123, water: "safe", costFactor: 1.2 },
            { code: "MT", name: "Malte", region: "EU", continent: "Europe", power: 122, water: "safe", costFactor: 1.5 },
            { code: "CY", name: "Chypre", region: "EU", continent: "Europe", power: 123, water: "safe", costFactor: 1.4 },
            { code: "LU", name: "Luxembourg", region: "EU", continent: "Europe", power: 127, water: "safe", costFactor: 2.0 },
            { code: "SI", name: "Slov√©nie", region: "EU", continent: "Europe", power: 125, water: "safe", costFactor: 1.3 },
            { code: "SK", name: "Slovaquie", region: "EU", continent: "Europe", power: 124, water: "safe", costFactor: 1.0 },
            { code: "EE", name: "Estonie", region: "EU", continent: "Europe", power: 126, water: "safe", costFactor: 1.1 },
            { code: "LV", name: "Lettonie", region: "EU", continent: "Europe", power: 125, water: "safe", costFactor: 1.0 },
            { code: "LT", name: "Lituanie", region: "EU", continent: "Europe", power: 125, water: "safe", costFactor: 1.0 },
            { code: "BG", name: "Bulgarie", region: "EU", continent: "Europe", power: 120, water: "safe", costFactor: 0.8 },
            { code: "RO", name: "Roumanie", region: "EU", continent: "Europe", power: 121, water: "safe", costFactor: 0.8 },
            { code: "AL", name: "Albanie", region: "EU_EAST", continent: "Europe", power: 95, water: "unsafe", costFactor: 0.7 },
            { code: "ME", name: "Mont√©n√©gro", region: "EU_EAST", continent: "Europe", power: 100, water: "unsafe", costFactor: 0.9 },
            { code: "RS", name: "Serbie", region: "EU_EAST", continent: "Europe", power: 105, water: "unsafe", costFactor: 0.8 },
            { code: "BA_BOS", name: "Bosnie-Herz√©govine", region: "EU_EAST", continent: "Europe", power: 95, water: "unsafe", costFactor: 0.7 }
        ].sort((a, b) => a.name.localeCompare(b.name));

        // ==========================================================================================
        // 5. FONCTIONS UTILITAIRES
        // ==========================================================================================
        
        const groupCountriesByContinent = (list) => {
            return list.reduce((groups, country) => {
                const continent = country.continent;
                if (!groups[continent]) groups[continent] = [];
                groups[continent].push(country);
                return groups;
            }, {});
        };

        const generateFlightLink = (origin, dest, startDate, endDate) => {
            const formatDates = (d) => d.slice(2,4) + d.slice(5,7) + d.slice(8,10);
            const startStr = formatDates(startDate);
            const endStr = formatDates(endDate);
            let destCode = dest.toLowerCase();
            if (destCode === 'ba') destCode = 'dps'; 
            if (destCode === 'zn') destCode = 'znz';
            if (destCode === 'cq') destCode = 'cun';
            if (destCode === 'ae') destCode = 'dxb';
            return `https://www.skyscanner.fr/transport/vols/${origin.toLowerCase()}/${destCode}/${startStr}/${endStr}?associateid=${AFFILIATE_CONFIG.flight_marker}`;
        };

        const generateHotelLink = (destName, start, end) => {
            const [sYear, sMonth, sDay] = start.split('-');
            const [eYear, eMonth, eDay] = end.split('-');
            return `https://www.booking.com/searchresults.html?ss=${destName}&checkin_year=${sYear}&checkin_month=${sMonth}&checkin_monthday=${sDay}&checkout_year=${eYear}&checkout_month=${eMonth}&checkout_monthday=${eDay}&aid=${AFFILIATE_CONFIG.hotel_aid}`;
        };

        // ==========================================================================================
        // 6. COMPOSANTS UI
        // ==========================================================================================

        const Header = ({ lang, setLang, t, setView }) => {
            const languageNames = { EN: "English", FR: "Fran√ßais", ES: "Espa√±ol", CN: "‰∏≠Êñá (ÁÆÄ‰Ωì)", JP: "Êó•Êú¨Ë™û" };
            return (
            <header className="w-full p-6 flex justify-between items-center max-w-4xl mx-auto border-b border-slate-100 bg-white/80 backdrop-blur-sm sticky top-0 z-50">
                <div className="flex items-center gap-2 text-slate-800 font-bold text-xl cursor-pointer group" onClick={() => { setView('home'); window.location.reload(); }}>
                    <div className="bg-gradient-to-br from-blue-600 to-indigo-600 text-white p-2.5 rounded-xl shadow-blue-200 shadow-lg transform -rotate-6 group-hover:rotate-0 transition-transform">
                        <Icons.Plane size={22} />
                    </div>
                    <span className="tracking-tight inline font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-600">{t.app_name}.</span>
                </div>
                <div className="flex items-center gap-3">
                    <div className="relative group">
                        <button className="flex items-center gap-2 text-sm font-sans font-medium text-slate-600 bg-slate-50 px-3 py-2 rounded-lg hover:bg-slate-100 transition-colors">
                            <Icons.Languages size={16} />{languageNames[lang]}
                        </button>
                        <div className="absolute right-0 mt-2 w-36 bg-white rounded-xl shadow-xl border border-slate-100 p-1 hidden group-hover:block fade-in">
                            {Object.keys(translations).map((l) => (
                                <button key={l} onClick={() => setLang(l)} className={`w-full text-left px-3 py-2 rounded-lg text-sm font-sans ${lang === l ? 'bg-blue-50 text-blue-600 font-bold' : 'text-slate-600 hover:bg-slate-50'}`}>
                                    {languageNames[l]}
                                </button>
                            ))}
                        </div>
                    </div>
                    <div className="text-xs font-bold text-blue-600 bg-blue-50 px-3 py-2 rounded-full border border-blue-100 hidden sm:block">{t.subtitle}</div>
                </div>
            </header>
            );
        };

        const DesktopNav = ({ t, currentView, setView }) => {
            const navItems = [
                { id: 'home', icon: Icons.MapPin, label: t.menu_home },
                { id: 'budget', icon: Icons.Calculator, label: t.menu_budget },
                { id: 'insurance', icon: Icons.Umbrella, label: t.menu_insurance },
                { id: 'feedback', icon: Icons.MessageSquare, label: t.menu_feedback },
            ];
            return (
                <div className="hidden sm:flex justify-center gap-4 mb-8">
                {navItems.map((item) => (
                    <button key={item.id} onClick={() => setView(item.id)} className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all ${currentView === item.id ? 'bg-blue-600 text-white shadow-lg shadow-blue-200' : 'bg-white text-slate-500 hover:bg-slate-50'}`}>
                        <item.icon size={16} />{item.label}
                    </button>
                ))}
                </div>
            );
        };

        const MobileNav = ({ t, currentView, setView }) => {
            const navItems = [
                { id: 'home', icon: Icons.MapPin, label: t.menu_home },
                { id: 'budget', icon: Icons.Calculator, label: t.menu_budget },
                { id: 'insurance', icon: Icons.Umbrella, label: t.menu_insurance },
                { id: 'feedback', icon: Icons.MessageSquare, label: t.menu_feedback },
            ];
            return (
                <div className="fixed bottom-0 left-0 w-full bg-white border-t border-slate-200 p-3 sm:hidden z-50 flex justify-around items-center pb-6">
                {navItems.map((item) => (
                    <button key={item.id} onClick={() => setView(item.id)} className={`flex flex-col items-center gap-1 text-[10px] font-bold uppercase tracking-wide transition-colors ${currentView === item.id ? 'text-blue-600' : 'text-slate-400'}`}>
                        <item.icon size={24} className={currentView === item.id ? 'stroke-2' : 'stroke-1'} />{item.label}
                    </button>
                ))}
                </div>
            );
        };

        const InputField = ({ label, icon: Icon, children }) => (
            <div className="mb-5">
                <label className="text-slate-500 text-[10px] sm:text-xs uppercase tracking-wider font-bold mb-2 flex items-center gap-2">
                    <Icon size={14} className="text-blue-500" /> {label}
                </label>
                {children}
            </div>
        );

        const CountrySelect = ({ value, onChange, placeholder, excludeCode }) => {
            const grouped = groupCountriesByContinent(countriesData);
            const continentOrder = ["Europe", "Asie", "Am√©riques", "Afrique / M-O", "Oc√©anie"];
            return (
                <select className="w-full bg-slate-50 border border-slate-200 text-slate-700 font-sans font-medium rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none cursor-pointer hover:bg-slate-100" value={value} onChange={onChange}>
                    <option value="">{placeholder}</option>
                    {continentOrder.map(continent => (
                        grouped[continent] && (
                        <optgroup key={continent} label={continent}>
                            {grouped[continent].filter(c => c.code !== excludeCode).map(c => (
                                <option key={c.code} value={c.code} className="font-sans">{c.name}</option>
                            ))}
                        </optgroup>
                        )
                    ))}
                </select>
            );
        };

        const DocumentCard = ({ title, status, description, cost, mandatory, link, t }) => {
            const getStatusColor = () => {
                if (status === 'alert' || mandatory) return 'bg-amber-50 text-amber-600 border-amber-100';
                if (status === 'error') return 'bg-red-50 text-red-600 border-red-100';
                return 'bg-emerald-50 text-emerald-600 border-emerald-100';
            };
            const getIcon = () => {
                if (status === 'alert' || mandatory) return <Icons.AlertTriangle size={20} />;
                if (status === 'error') return <Icons.ShieldCheck size={20} />;
                return <Icons.CheckCircle size={20} />;
            };
            return (
                <div className="bg-white border border-slate-100 rounded-xl p-5 mb-3 shadow-sm hover-card flex flex-row items-start gap-4 group relative z-10">
                    <div className={`p-3 rounded-xl shrink-0 border ${getStatusColor()} transition-colors`}>{getIcon()}</div>
                    <div className="flex-1 w-full">
                        <div className="flex justify-between items-start">
                            <h4 className="font-bold text-slate-800 text-lg group-hover:text-blue-600 transition-colors">{title}</h4>
                            {mandatory && <span className="bg-rose-50 text-rose-600 border border-rose-100 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider">{t.doc_mandatory}</span>}
                        </div>
                        <p className="text-sm text-slate-500 mt-1 leading-relaxed">{description}</p>
                        <div className="flex flex-wrap items-center gap-3 mt-3">
                            {/* Suppression du co√ªt si null */}
                            {cost && <div className="inline-flex items-center text-xs font-bold text-slate-700 bg-slate-50 px-2.5 py-1 rounded-md border border-slate-200">{t.cost}: {cost}</div>}
                            {link && <a href={link} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1.5 text-xs font-bold text-white bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md transition-colors shadow-sm">{t.btn_official_link}<Icons.ExternalLink size={12} /></a>}
                        </div>
                    </div>
                </div>
            );
        };

        const OfferCountdown = ({ t }) => {
            const [timeLeft, setTimeLeft] = useState(600);
            useEffect(() => { const timer = setInterval(() => setTimeLeft((prev) => (prev > 0 ? prev - 1 : 0)), 1000); return () => clearInterval(timer); }, []);
            const formatTime = (seconds) => { const m = Math.floor(seconds / 60); const s = seconds % 60; return `${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`; };
            return <div className="flex items-center justify-center gap-2 mb-4 text-sm font-medium text-rose-600 animate-pulse"><Icons.Clock size={16} /><span>{t.offer_expires} {formatTime(timeLeft)}</span></div>;
        };

        const PassportPower = ({ score, maxScore = 150, t }) => {
            const percentage = Math.min((score / maxScore) * 100, 100);
            let tier = "Bronze", colorClass = "bg-amber-600", trophyColor = "text-slate-300";
            if (score > 100) { tier = "Silver"; colorClass = "bg-slate-400"; }
            if (score > 125) { tier = "Gold"; colorClass = "bg-yellow-500"; trophyColor = "text-yellow-400"; }
            return (
                <div className="bg-slate-900 text-white rounded-2xl p-6 mb-6 relative overflow-hidden shadow-xl transform transition-all hover:scale-[1.01] z-10">
                    <div className="absolute top-0 right-0 p-4 opacity-10"><Icons.Globe size={120} /></div>
                    <div className="relative z-10">
                        <div className="flex justify-between items-start mb-4">
                            <div><h3 className="text-slate-400 text-xs uppercase font-bold tracking-widest">{t.passport_power}</h3><div className="text-4xl font-extrabold flex items-center gap-3 mt-2"><Icons.Trophy size={32} className={trophyColor} />{score} <span className="text-lg text-slate-500 font-normal">/ {maxScore}</span></div></div>
                            <div className={`px-4 py-1.5 rounded-full text-xs font-black text-slate-900 uppercase tracking-wide shadow-lg ${colorClass}`}>{tier} Tier</div>
                        </div>
                        <div className="w-full bg-slate-800 h-3 rounded-full overflow-hidden border border-slate-700"><div className={`h-full ${colorClass} transition-all duration-1000 ease-out`} style={{ width: `${percentage}%` }}></div></div>
                        <p className="text-xs text-slate-400 mt-4 flex items-center gap-2"><Icons.CheckCircle size={12} className="text-green-500" />{t.access_text} {score} {t.countries_text}.</p>
                    </div>
                </div>
            );
        };

        const HealthCard = ({ water, vaccine, t }) => (
            <div className="bg-white border border-slate-100 rounded-xl p-5 mb-3 shadow-sm hover-card flex flex-row gap-4 items-start relative z-10">
                <div className="p-3 rounded-xl shrink-0 border bg-rose-50 text-rose-600 border-rose-100"><Icons.Heart size={20} /></div>
                <div className="flex-1">
                <h4 className="font-bold text-slate-800 text-lg mb-2">{t.health_title}</h4>
                <div className="space-y-2">
                    <div className={`flex items-center gap-2 text-sm font-medium ${water === 'safe' ? 'text-green-600' : 'text-red-500'}`}><Icons.Droplets size={16} />{water === 'safe' ? t.water_safe : t.water_unsafe}</div>
                    {vaccine && <div className="flex items-center gap-2 text-sm font-medium text-amber-600"><Icons.AlertTriangle size={16} />{t.vaccine_mandatory} <span className="font-bold">{vaccine}</span></div>}
                </div>
                </div>
            </div>
        );

        const CustomsCard = ({ items, t }) => (
            <div className="bg-white border border-rose-100 rounded-xl p-5 mb-3 shadow-sm hover-card flex flex-row gap-4 items-start relative z-10">
                <div className="p-3 rounded-xl shrink-0 border bg-rose-50 text-rose-600 border-rose-100"><Icons.Siren size={20} /></div>
                <div className="flex-1">
                <h4 className="font-bold text-slate-800 text-lg mb-2">{t.customs_title}</h4>
                <p className="text-xs font-bold uppercase text-rose-500 mb-2">{t.forbidden_items}</p>
                <ul className="list-disc list-inside text-sm text-slate-600 space-y-1">{items.map((item, idx) => <li key={idx}>{item}</li>)}</ul>
                </div>
            </div>
        );

        const ActionButton = ({ icon: Icon, title, subtitle, colorClass, link, isExternal }) => (
            <a href={link} target={isExternal ? "_blank" : "_self"} rel={isExternal ? "noopener noreferrer" : ""} className="flex items-center justify-between p-4 bg-white border border-slate-200 rounded-xl hover:border-blue-400 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group cursor-pointer relative z-10">
                <div className="flex items-center gap-4"><div className={`${colorClass} p-3 rounded-lg bg-opacity-10`}><Icon size={24} className={colorClass.replace('bg-', 'text-')} /></div><div className="text-left"><div className="font-bold text-slate-800">{title}</div><div className="text-xs text-slate-500">{subtitle}</div></div></div>
                <Icons.ExternalLink size={16} className="text-slate-300 group-hover:text-blue-500 transition-colors" />
            </a>
        );

        const ServiceCard = ({ icon: Icon, title, desc, colorClass, link }) => (
            <a href={link} target="_blank" rel="noopener noreferrer" className="bg-white border border-slate-100 rounded-xl p-4 shadow-sm hover-card hover:border-blue-300 transition-all duration-300 flex items-center gap-4 group cursor-pointer relative z-10">
                <div className={`p-3 rounded-xl shrink-0 ${colorClass} bg-opacity-10`}><Icon size={24} className={colorClass.replace('bg-', 'text-')} /></div>
                <div className="flex-1"><div className="flex justify-between items-center"><h4 className="font-bold text-slate-800 group-hover:text-blue-600 transition-colors">{title}</h4><Icons.ExternalLink size={14} className="text-slate-300 group-hover:text-blue-500" /></div><p className="text-xs text-slate-500 mt-1">{desc}</p></div>
            </a>
        );

        // --- NOUVELLES PAGES (BUDGET & INSURANCE) ---

        const BudgetComponent = ({ t }) => {
            const [localDest, setLocalDest] = useState("");
            const [days, setDays] = useState(7);
            const [style, setStyle] = useState("med");
            const [travelers, setTravelers] = useState(1);
            const [season, setSeason] = useState("mid");
            const [res, setRes] = useState(null);
            const [daily, setDaily] = useState(null);
            const [flightEst, setFlightEst] = useState(null);
            
            const calc = () => {
                if(!localDest) return;
                const c = countriesData.find(x => x.code === localDest);
                const base = 60; 
                const factor = c ? (c.costFactor || 1) : 1;
                
                // Multipliers
                const styleMult = style === 'low' ? 0.6 : (style === 'high' ? 2.5 : 1);
                const seasonMult = season === 'low' ? 0.8 : (season === 'high' ? 1.4 : 1);
                
                // Flight Heuristic
                const isLongHaul = c && c.continent !== "Europe"; 
                const baseFlight = isLongHaul ? 800 : 150;
                const flightCost = Math.round(baseFlight * seasonMult * travelers);

                const dailyPerPerson = Math.round(base * factor * styleMult * seasonMult);
                const totalLiving = dailyPerPerson * days * travelers;
                
                setDaily(dailyPerPerson);
                setFlightEst(flightCost);
                setRes(totalLiving + flightCost);
            };

            return (
                <div className="w-full max-w-4xl mx-auto bg-white p-8 rounded-3xl shadow-xl border border-slate-100 fade-in relative z-10">
                    <div className="text-center mb-8"><div className="mx-auto w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mb-4"><Icons.Calculator className="text-green-600" size={28} /></div><h2 className="text-3xl font-bold text-slate-800">{t.budget_title}</h2><p className="text-slate-500 mt-2">{t.budget_desc}</p></div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-5">
                            <InputField label={t.label_destination} icon={Icons.MapPin}><CountrySelect value={localDest} onChange={(e) => setLocalDest(e.target.value)} placeholder={t.placeholder_select} /></InputField>
                            <div className="grid grid-cols-2 gap-4">
                                <InputField label={t.duration_calc} icon={Icons.Clock}><input type="number" value={days} onChange={(e) => setDays(e.target.value)} className="w-full bg-slate-50 border border-slate-200 rounded-xl p-3" /></InputField>
                                <InputField label={t.budget_travelers} icon={Icons.Users}><input type="number" min="1" value={travelers} onChange={(e) => setTravelers(e.target.value)} className="w-full bg-slate-50 border border-slate-200 rounded-xl p-3" /></InputField>
                            </div>
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase mb-2 block">Style</label>
                                <div className="grid grid-cols-3 gap-2">{['low', 'med', 'high'].map(s => <button key={s} onClick={() => setStyle(s)} className={`p-3 rounded-xl text-xs font-bold border transition-all ${style === s ? 'bg-blue-600 text-white border-blue-600 shadow-md' : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50'}`}>{t[`budget_style_${s}`]}</button>)}</div>
                            </div>
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase mb-2 block">{t.budget_season}</label>
                                <div className="grid grid-cols-3 gap-2">{['low', 'mid', 'high'].map(s => <button key={s} onClick={() => setSeason(s)} className={`p-3 rounded-xl text-xs font-bold border transition-all ${season === s ? 'bg-orange-500 text-white border-orange-500 shadow-md' : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50'}`}>{t[`budget_season_${s}`]}</button>)}</div>
                            </div>
                            <button onClick={calc} className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg hover:shadow-green-200 transform hover:-translate-y-1">Calculer</button>
                        </div>

                        <div className="flex flex-col justify-center">
                            {res ? (
                                <div className="bg-green-50 border border-green-200 rounded-2xl p-8 text-center fade-in h-full flex flex-col justify-center">
                                    <span className="text-slate-500 text-sm font-bold uppercase tracking-wider mb-2">{t.budget_result_total}</span>
                                    <span className="text-5xl font-extrabold text-green-700 block mb-6">{res} ‚Ç¨</span>
                                    
                                    <div className="grid grid-cols-1 gap-3 text-sm text-left border-t border-green-200 pt-4">
                                        <div className="flex justify-between p-2 bg-white rounded-lg">
                                            <span className="text-slate-500">{t.budget_flight_estimate}</span>
                                            <span className="font-bold text-slate-800">~{flightEst}‚Ç¨</span>
                                        </div>
                                        <div className="flex justify-between p-2 bg-white rounded-lg">
                                            <span className="text-slate-500">{t.budget_living}</span>
                                            <span className="font-bold text-slate-800">{res - flightEst}‚Ç¨</span>
                                        </div>
                                        <div className="flex justify-between p-2 bg-blue-50 text-blue-700 rounded-lg mt-2 font-bold">
                                            <span>{t.budget_result_daily}</span>
                                            <span>{daily}‚Ç¨ /j</span>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="h-full flex items-center justify-center text-slate-300 border-2 border-dashed border-slate-200 rounded-2xl min-h-[200px] bg-slate-50">
                                    <Icons.Calculator size={64} />
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- COMPOSANT ASSURANCE INTELLIGENT ---
        const InsurancePage = ({ t }) => {
            const [dest, setDest] = useState("");
            const [plans, setPlans] = useState([]);

            useEffect(() => {
                if (!dest) { setPlans([]); return; }
                const country = countriesData.find(c => c.code === dest);
                
                // Logique de recommandation Chapka
                let p = [];
                const whvCountries = ["AU", "NZ", "JP", "CA", "KR", "AR", "BR", "CL", "CO", "MX", "PE", "UY", "HK", "TW"]; // Pays PVT courants
                
                if (whvCountries.includes(dest)) {
                    p.push({ name: "Cap Working Holiday", desc: "Sp√©cial PVT : Frais m√©dicaux illimit√©s, RC, Retour anticip√©.", price: "36‚Ç¨/mois", promo: "33‚Ç¨/mois" });
                }
                
                if (country && country.region === "EU") {
                     p.push({ name: "Cap Assistance 24/7", desc: "Id√©al courts s√©jours (< 90j) en Europe. Rapatriement inclus.", price: "22‚Ç¨", promo: "20‚Ç¨" });
                } else {
                     p.push({ name: "Cap Assistance 24/7", desc: "Vacances < 90 jours. Plafond m√©dical √©lev√© pour USA/Monde.", price: "30‚Ç¨", promo: "28‚Ç¨" });
                }

                p.push({ name: "Cap Aventure", desc: "Pour les longs voyages (> 3 mois) ou tour du monde.", price: "46‚Ç¨/mois", promo: "44‚Ç¨/mois" });
                
                setPlans(p);
            }, [dest]);

            return (
                <div className="w-full max-w-4xl mx-auto bg-white p-8 rounded-3xl shadow-xl border border-slate-100 text-center fade-in relative z-10">
                    <div className="mx-auto w-20 h-20 bg-rose-100 rounded-full flex items-center justify-center mb-6"><Icons.Umbrella className="text-rose-600" size={40} /></div>
                    <h2 className="text-3xl font-bold text-slate-800 mb-2">{t.insurance_title}</h2>
                    <p className="text-slate-500 mb-8">{t.insurance_desc}</p>

                    <div className="max-w-md mx-auto mb-10 text-left">
                        <InputField label={t.insurance_select_dest} icon={Icons.MapPin}>
                            <CountrySelect value={dest} onChange={(e) => setDest(e.target.value)} placeholder="Selectionner..." />
                        </InputField>
                    </div>

                    {dest && (
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 fade-in">
                            {plans.map((plan, idx) => (
                                <div key={idx} className="bg-white border-2 border-rose-100 p-5 rounded-2xl hover:border-rose-400 transition-all shadow-sm hover:shadow-md flex flex-col">
                                    <div className="font-bold text-slate-800 text-lg mb-2">{plan.name}</div>
                                    <div className="text-xs text-slate-500 mb-4 flex-grow">{plan.desc}</div>
                                    <div className="mt-auto">
                                        <div className="text-slate-400 line-through text-xs">{plan.price}</div>
                                        <div className="text-rose-600 font-extrabold text-xl">{plan.promo}</div>
                                        <a href={AFFILIATE_CONFIG.insurance_link} target="_blank" className="block w-full mt-3 bg-rose-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-rose-700 transition-colors">Voir l'offre</a>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                    
                    <div className="bg-slate-50 p-6 rounded-2xl border border-slate-200 text-left">
                        <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2"><Icons.CreditCard size={20}/> Pourquoi la Carte Bancaire ne suffit pas ?</h4>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-slate-600">
                            <div className="flex items-center gap-2 text-red-500"><Icons.X size={16}/> Limit√© √† 90 jours cons√©cutifs</div>
                            <div className="flex items-center gap-2 text-red-500"><Icons.X size={16}/> Franchise √©lev√©e (souvent 50-70‚Ç¨)</div>
                            <div className="flex items-center gap-2 text-red-500"><Icons.X size={16}/> Avance de frais obligatoire</div>
                            <div className="flex items-center gap-2 text-red-500"><Icons.X size={16}/> Plafonds de remboursement bas</div>
                        </div>
                    </div>
                </div>
            );
        };

        const FeedbackPage = ({ t }) => {
            const [sent, setSent] = useState(false);
            const handleSubmit = (e) => { e.preventDefault(); setSent(true); setTimeout(() => setSent(false), 3000); };
            return (
                <div className="w-full max-w-lg mx-auto bg-white p-8 rounded-3xl shadow-xl border border-slate-100 fade-in relative z-10">
                    <div className="text-center mb-8"><div className="mx-auto w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4"><Icons.Mail className="text-indigo-600" size={32} /></div><h2 className="text-2xl font-bold text-slate-800">{t.feedback_title}</h2><p className="text-slate-500 mt-2">{t.feedback_desc}</p></div>
                    {sent ? <div className="p-8 text-center text-green-600 font-bold bg-green-50 rounded-xl border border-green-100">Message envoy√© ! Merci.</div> : (
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">Email</label><input type="email" required className="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" placeholder="hello@example.com" /></div>
                            <div><label className="block text-xs font-bold text-slate-500 uppercase mb-2">Message</label><textarea required rows="5" className="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" placeholder={t.feedback_placeholder}></textarea></div>
                            <button type="submit" className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg hover:shadow-indigo-200">{t.btn_send}</button>
                        </form>
                    )}
                </div>
            );
        };

        function App() {
            const [lang, setLang] = useState('EN'); // Anglais par d√©faut
            const [currentView, setView] = useState('home'); 
            const [step, setStep] = useState(0); 
            const [formData, setFormData] = useState({ nationality: "FR", origin: "FR", destination: "", age: 25, startDate: new Date().toISOString().split('T')[0], endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] });
            const [result, setResult] = useState(null);

            const t = translations[lang] || translations.EN;

            const handleSearch = () => {
                if (!formData.destination) { alert(t.missing_dest_error); return; }
                if (formData.origin === formData.destination) { alert(t.origin_same_dest_error); return; }
                const start = new Date(formData.startDate);
                const end = new Date(formData.endDate);
                if (end <= start) { alert("La date de retour doit √™tre apr√®s la date de d√©part."); return; }
                const diffTime = Math.abs(end - start);
                const durationDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                
                setStep(1);
                setTimeout(() => {
                    const passportInfo = countriesData.find(c => c.code === formData.nationality) || countriesData[0];
                    const originInfo = countriesData.find(c => c.code === formData.origin) || countriesData[0];
                    const destInfo = countriesData.find(c => c.code === formData.destination);
                    
                    let docs = [];
                    let isEuToEu = passportInfo.region === 'EU' && destInfo.region === 'EU';

                    // 1. Identit√© de base - CO√õT NULL (Masqu√©)
                    if (isEuToEu) {
                        docs.push({ title: "CNI ou Passeport", status: "ok", description: "Zone Schengen/EU : Libre circulation.", mandatory: true, cost: null });
                    } else {
                        docs.push({ title: "Passeport Valide", status: "ok", description: "Validit√© min. 6 mois apr√®s le retour.", mandatory: true, cost: null });
                    }

                    // 2. Visas & Taxes Sp√©cifiques
                    if (destInfo.requirements) {
                        destInfo.requirements.forEach(req => {
                            let status = "info";
                            if (req.mandatory) status = "alert";
                            if (req.type === "visa") status = "alert"; 
                            docs.push({ title: req.title, status: status, description: req.description, cost: req.cost, link: req.link, mandatory: req.mandatory });
                        });
                    }

                    const flightLink = generateFlightLink(formData.origin, formData.destination, formData.startDate, formData.endDate);
                    const hotelLink = generateHotelLink(destInfo.name, formData.startDate, formData.endDate);

                    setResult({ passportPower: passportInfo.power, destinationName: destInfo.name, originName: originInfo.name, documents: docs, health: destInfo.health, customs: destInfo.customs, water: destInfo.water, duration: durationDays, flightLink: flightLink, hotelLink: hotelLink });
                    setStep(2);
                }, 1500);
            };

            const reset = () => { setStep(0); setResult(null); };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col">
                    <Header lang={lang} setLang={setLang} t={t} setView={(v) => { setView(v); setStep(0); }} />
                    <DesktopNav t={t} currentView={currentView} setView={(v) => { setView(v); setStep(0); }} />

                    <main className="flex-grow flex flex-col items-center justify-start pt-4 px-4 w-full max-w-6xl mx-auto pb-40 relative z-10">
                        {currentView === 'home' && (
                            <>
                                {step === 0 && (
                                    <div className="w-full max-w-4xl fade-in">
                                        <div className="text-center mb-10">
                                            <h1 className="text-4xl sm:text-5xl font-extrabold text-slate-900 mb-4 tracking-tight">{t.hero_title} <span className="text-blue-600">{t.hero_highlight}</span>.</h1>
                                            <p className="text-slate-500 text-lg sm:text-xl max-w-2xl mx-auto">{t.hero_desc}</p>
                                        </div>
                                        <div className="bg-white p-8 rounded-3xl shadow-2xl shadow-blue-100/50 border border-white/50 relative overflow-hidden backdrop-blur-sm">
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                                <div className="space-y-6">
                                                    <InputField label={t.label_nationality} icon={Icons.ShieldCheck}><CountrySelect value={formData.nationality} onChange={(e) => setFormData({...formData, nationality: e.target.value})} placeholder={t.placeholder_select} /></InputField>
                                                    <InputField label={t.label_origin} icon={Icons.Navigation}><CountrySelect value={formData.origin} onChange={(e) => setFormData({...formData, origin: e.target.value})} placeholder={t.placeholder_select} /></InputField>
                                                </div>
                                                <div className="space-y-6">
                                                    <InputField label={t.label_destination} icon={Icons.MapPin}><CountrySelect value={formData.destination} onChange={(e) => setFormData({...formData, destination: e.target.value})} placeholder={t.placeholder_select} excludeCode={formData.origin} /></InputField>
                                                    
                                                    {/* CORRECTION DATE MOBILE: min-w-0 et grid ajust√©e */}
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                                                        <InputField label={t.label_start_date} icon={Icons.Calendar}>
                                                            <input type="date" className="w-full min-w-0 bg-slate-50 border border-slate-200 rounded-xl p-3 sm:p-4 text-sm" value={formData.startDate} onChange={(e) => setFormData({...formData, startDate: e.target.value})} />
                                                        </InputField>
                                                        <InputField label={t.label_end_date} icon={Icons.Calendar}>
                                                            <input type="date" className="w-full min-w-0 bg-slate-50 border border-slate-200 rounded-xl p-3 sm:p-4 text-sm" value={formData.endDate} onChange={(e) => setFormData({...formData, endDate: e.target.value})} />
                                                        </InputField>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="max-w-md mx-auto">
                                                <InputField label={t.label_age} icon={Icons.Trophy}><input type="number" className="w-full bg-slate-50 border border-slate-200 rounded-xl p-4" value={formData.age} onChange={(e) => setFormData({...formData, age: e.target.value})} /></InputField>
                                                <button onClick={handleSearch} className="w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-xl shadow-blue-200/50 flex justify-center items-center gap-3 group hover-card transition-all transform active:scale-95">{t.btn_analyze} <Icons.ArrowRight size={20} className="group-hover:translate-x-1 transition-transform" /></button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {step === 1 && (
                                    <div className="flex flex-col items-center justify-center mt-20 fade-in">
                                        <div className="relative mb-8">
                                            <div className="absolute inset-0 bg-blue-100 rounded-full animate-ping opacity-75"></div>
                                            <div className="relative bg-white p-6 rounded-full shadow-xl border border-blue-50"><Icons.Plane size={48} className="text-blue-600 animate-pulse" /></div>
                                        </div>
                                        <h2 className="text-2xl font-bold text-slate-800">{t.loading_title}</h2><p className="text-slate-400 mt-2 text-sm font-medium">{t.loading_text}</p>
                                    </div>
                                )}

                                {step === 2 && result && (
                                    <div className="w-full max-w-3xl fade-in">
                                        <div className="flex items-center justify-between mb-8">
                                            <button onClick={reset} className="text-slate-500 hover:text-slate-800 text-sm font-bold flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white hover:shadow-sm transition-all">&larr; {t.result_back}</button>
                                            <div className="flex flex-col sm:flex-row sm:items-center gap-2 text-sm font-bold text-slate-800 bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100">
                                                <div className="flex items-center gap-2"><span className="text-slate-400">{result.originName}</span><Icons.ArrowRight size={14} className="text-blue-500" /><span className="text-blue-600">{result.destinationName}</span></div><span className="hidden sm:inline text-slate-300">|</span><span className="text-slate-500 text-xs font-normal">{t.duration_calc} {result.duration} {t.days}</span>
                                            </div>
                                        </div>

                                        <PassportPower score={result.passportPower} t={t} />

                                        <div className="mb-10">
                                            <h3 className="text-xl font-bold text-slate-800 mb-5 flex items-center gap-3">{t.docs_title} <span className="bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-full border border-slate-200">{result.documents.length}</span></h3>
                                            <div className="space-y-4">
                                                {result.documents.map((doc, idx) => (<DocumentCard key={idx} {...doc} isMandatory={doc.mandatory} t={t} />))}
                                                <HealthCard water={result.water || 'unsafe'} vaccine={result.health?.yellowFever ? 'Fi√®vre Jaune (Yellow Fever)' : null} t={t} />
                                                {result.customs && result.customs.length > 0 && <CustomsCard items={result.customs} t={t} />}
                                            </div>
                                            <div className="mt-4 p-4 bg-blue-50/50 border border-blue-100 rounded-xl flex gap-3 text-sm text-blue-800"><div className="mt-0.5 shrink-0"><Icons.ShieldCheck size={18} /></div><p className="font-medium">{t.docs_disclaimer}</p></div>
                                        </div>

                                        <div className="mb-10">
                                            <h3 className="text-xl font-bold text-slate-800 mb-5">{t.services_title}</h3>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <ServiceCard icon={Icons.Wifi} title={t.service_esim} desc={t.service_esim_desc} colorClass="bg-teal-500 text-teal-500" link={AFFILIATE_CONFIG.esim_link} />
                                                <ServiceCard icon={Icons.Ticket} title={t.service_activities} desc={t.service_activities_desc} colorClass="bg-purple-500 text-purple-500" link={`https://klook.tpo.li/2tLXzXx1`} />
                                            </div>
                                        </div>

                                        <div className="mb-32">
                                            <h3 className="text-xl font-bold text-slate-800 mb-5 flex justify-between items-end">{t.action_title}</h3>
                                            <OfferCountdown t={t} />
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                                <ActionButton icon={Icons.Plane} title={t.action_flight} subtitle="" colorClass="bg-sky-500 text-sky-500" link={result.flightLink} isExternal={true} />
                                                <ActionButton icon={Icons.MapPin} title={t.action_hotel} subtitle="" colorClass="bg-indigo-500 text-indigo-500" link={result.hotelLink} isExternal={true} />
                                            </div>
                                            <div className="text-center p-8 rounded-3xl bg-gradient-to-br from-slate-900 to-slate-800 text-white shadow-xl relative overflow-hidden group">
                                                <div className="absolute top-0 right-0 p-8 opacity-10 transform rotate-12 group-hover:rotate-0 transition-transform duration-500"><Icons.Heart size={100} fill="currentColor" /></div>
                                                <Icons.Heart className="mx-auto text-rose-500 mb-4 fill-rose-500 animate-pulse" size={32} />
                                                <h4 className="text-xl font-bold mb-2">{t.donate_title}</h4><p className="text-slate-300 mb-6 max-w-sm mx-auto text-sm leading-relaxed">{t.donate_text}</p>
                                                <button className="bg-white text-slate-900 px-8 py-3 rounded-full text-sm font-bold hover:bg-rose-50 hover:text-rose-600 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">{t.donate_btn}</button>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </>
                        )}

                        {currentView === 'budget' && <BudgetComponent t={t} />}
                        {currentView === 'insurance' && <InsurancePage t={t} />}
                        {currentView === 'feedback' && <FeedbackPage t={t} />}
                    </main>

                    <MobileNav t={t} currentView={currentView} setView={(v) => { setView(v); setStep(0); }} />

                    <footer className="py-12 text-center border-t border-slate-100 bg-white/50 backdrop-blur-sm mt-auto mb-16 sm:mb-0">
                        <div className="flex flex-col items-center justify-center gap-2 text-slate-400 text-xs font-medium uppercase tracking-widest font-sans">
                            <div className="flex items-center gap-1"><Icons.Copyright size={12} /><span>2025 {t.app_name} Inc.</span></div>
                            <p>{t.footer_rights}</p>
                            <p className="opacity-60 text-[10px]">{t.footer_affiliate}</p>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
